<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HFA Cross-border Health Hub | æ¸¯äººè·¨å¢ƒå°±åŒ»å¹³å°</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* ç°ä»£åŒ–é…è‰²ç³»ç»Ÿ (Slate & Blue) */
            --primary: #2563eb;       /* Royal Blue */
            --primary-light: #60a5fa;
            --primary-dark: #1e40af;
            --secondary: #10b981;     /* Emerald */
            --accent: #f59e0b;        /* Amber */
            
            --bg-body: #f8fafc;       /* Slate 50 */
            --surface: #ffffff;
            
            --text-main: #1e293b;     /* Slate 800 */
            --text-secondary: #475569;/* Slate 600 */
            --text-muted: #94a3b8;    /* Slate 400 */
            
            --border: #e2e8f0;        /* Slate 200 */
            
            /* é˜´å½±ç³»ç»Ÿ */
            --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-sm: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            --shadow-md: 0 10px 15px -3px rgb(0 0 0 / 0.08), 0 4px 6px -4px rgb(0 0 0 / 0.08);
            --shadow-lg: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            
            --radius-md: 12px;
            --radius-lg: 20px;
            --nav-height: 76px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.7;
            padding-top: var(--nav-height);
            /* èƒŒæ™¯è£…é¥°å…‰æ™• */
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(37, 99, 235, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(16, 185, 129, 0.05) 0%, transparent 40%);
            background-attachment: fixed;
            -webkit-font-smoothing: antialiased;
        }

        /* --- Utils --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 32px 24px; min-height: calc(100vh - var(--nav-height)); }
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .mb-4 { margin-bottom: 16px; }
        .mt-4 { margin-top: 16px; }
        .flex-center { display: flex; align-items: center; justify-content: center; }
        .flex-between { display: flex; align-items: center; justify-content: space-between; }
        .gap-2 { gap: 8px; }
        .gap-4 { gap: 16px; }
        
        /* Buttons */
        .btn {
            display: inline-flex; align-items: center; justify-content: center;
            padding: 12px 28px; border-radius: 50px; font-weight: 600; cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            border: none; font-size: 15px; outline: none; letter-spacing: 0.3px;
        }
        .btn:active { transform: scale(0.96); }
        
        .btn-primary { 
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); 
            color: white; 
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25);
        }
        .btn-primary:hover { 
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4); 
            transform: translateY(-2px);
        }
        
        .btn-secondary { 
            background: white; color: var(--primary); 
            border: 1px solid var(--border);
            box-shadow: var(--shadow-xs);
        }
        .btn-secondary:hover { 
            border-color: var(--primary); 
            background: #f0f7ff; 
            transform: translateY(-1px);
        }
        
        /* Cards */
        .card {
            background: var(--surface); 
            border-radius: var(--radius-lg); 
            padding: 32px;
            box-shadow: var(--shadow-sm); 
            border: 1px solid rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            overflow-wrap: break-word;
        }
        .card:hover { 
            transform: translateY(-4px); 
            box-shadow: var(--shadow-md); 
        }
        .clickable { cursor: pointer; }
        
        /* Typography */
        h1, h2, h3, h4 { letter-spacing: -0.02em; color: var(--text-main); }
        h1 { font-weight: 800; }
        .section-title { font-size: 32px; font-weight: 800; color: var(--text-main); margin-bottom: 8px; position: relative; display: inline-block; }
        .section-title::after {
            content: ''; position: absolute; bottom: 4px; left: 0; width: 40%; height: 6px;
            background: var(--primary); opacity: 0.2; border-radius: 4px; z-index: -1;
        }
        .section-desc { color: var(--text-secondary); margin-bottom: 40px; font-size: 16px; max-width: 600px; }

        /* Grids */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; }

        /* --- Navbar --- */
        .navbar {
            position: fixed; top: 0; left: 0; width: 100%; height: var(--nav-height);
            background: rgba(255, 255, 255, 0.85); 
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3); 
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.03);
            z-index: 100;
            display: flex; align-items: center; justify-content: space-between; 
            padding: 0 40px;
        }
        .logo { 
            font-size: 22px; font-weight: 800; color: var(--primary); 
            display: flex; align-items: center; gap: 12px; letter-spacing: -0.03em; flex-shrink: 0;
        }
        .logo span { 
            font-weight: 500; color: var(--text-secondary); font-size: 14px; 
            padding-left: 12px; border-left: 1px solid var(--border); 
            letter-spacing: 0;
        }
        .nav-links { display: flex; gap: 40px; flex-shrink: 0; }
        .nav-item { 
            cursor: pointer; color: var(--text-secondary); font-weight: 600; font-size: 15px;
            padding: 26px 0; position: relative; transition: color 0.2s; flex-shrink: 0;
        }
        .nav-item:hover, .nav-item.active { color: var(--primary); }
        .nav-item.active::after {
            content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); 
            width: 20px; height: 3px; background: var(--primary); border-radius: 4px 4px 0 0;
        }

        /* --- Animation --- */
        .page-section { display: none; opacity: 0; transform: translateY(15px); transition: opacity 0.4s ease, transform 0.4s ease; }
        .page-section.active { display: block; opacity: 1; transform: translateY(0); }

        /* --- Inputs & Forms (Forced Visibility) --- */
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; color: var(--text-main); }
        
        .form-input, .form-select, .form-textarea {
            width: 100%; padding: 12px 14px; 
            border: 1px solid var(--border); border-radius: var(--radius-md);
            font-family: inherit; font-size: 15px; 
            background-color: #ffffff !important;
            color: #1e293b !important; /* Force Dark Color */
            transition: all 0.2s;
            line-height: normal;
        }

        .form-textarea { resize: vertical; min-height: 80px; }
        
        /* Auto-fill fix */
        input:-webkit-autofill,
        input:-webkit-autofill:hover, 
        input:-webkit-autofill:focus, 
        input:-webkit-autofill:active{
            -webkit-box-shadow: 0 0 0 30px white inset !important;
            -webkit-text-fill-color: #1e293b !important;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus { 
            border-color: var(--primary); 
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); 
            outline: none;
        }
        
        ::placeholder { color: #94a3b8; opacity: 1; }

        .input-group { display: flex; gap: 8px; width: 100%; align-items: stretch; }
        .input-group .form-input { flex-grow: 1; border-top-right-radius: 0; border-bottom-right-radius: 0; }
        .input-group-btn {
            border: 1px solid var(--border); border-left: none;
            background: #f8fafc; color: var(--text-secondary);
            padding: 0 16px; border-radius: 0 var(--radius-md) var(--radius-md) 0;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
        }
        .input-group-btn:hover { background: #e2e8f0; }

        /* --- Components --- */
        .tag { 
            display: inline-flex; align-items: center; padding: 4px 12px; 
            border-radius: 20px; font-size: 12px; margin-right: 6px; font-weight: 600; 
        }
        .tag.blue { background: #eff6ff; color: var(--primary); }
        .tag.green { background: #ecfdf5; color: var(--secondary); }
        .tag.red { background: #fef2f2; color: #ef4444; }
        .tag.orange { background: #fff7ed; color: #f97316; }

        .tabs { display: flex; border-bottom: 1px solid var(--border); margin-bottom: 32px; gap: 32px; }
        .tab-btn { 
            padding: 16px 0; cursor: pointer; color: var(--text-muted); 
            font-weight: 600; position: relative; transition: color 0.2s; font-size: 15px;
        }
        .tab-btn.active { color: var(--primary); }
        .tab-btn.active::after { 
            content: ''; position: absolute; bottom: -1px; left: 0; width: 100%; height: 2px; 
            background: var(--primary); 
        }

        /* --- Hero --- */
        .hero { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 60px; 
            align-items: center; 
            padding: 80px 0 100px; 
            position: relative; 
        }
        .hero-content { max-width: 600px; }
        .hero h1 { 
            font-size: 56px; line-height: 1.1; margin-bottom: 24px; 
            background: linear-gradient(135deg, var(--text-main) 0%, #475569 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .hero p {
            font-size: 18px; color: var(--text-secondary); margin-bottom: 32px; line-height: 1.6;
        }
        .hero-actions { display: flex; gap: 16px; flex-wrap: wrap; }
        
        .hero-visual { 
            position: relative; 
            width: 100%; 
            height: 400px; 
            background: radial-gradient(circle at center, rgba(37, 99, 235, 0.03) 0%, transparent 70%);
            border-radius: 50%;
        }
        .hero-card {
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(12px);
            padding: 24px; 
            border-radius: 20px; 
            box-shadow: var(--shadow-lg);
            position: absolute; 
            border: 1px solid rgba(255,255,255,0.8);
            animation: float 6s ease-in-out infinite;
            min-width: 260px;
        }
        .c1 { top: 10%; left: 5%; z-index: 2; animation-delay: 0s; }
        .c2 { bottom: 15%; right: 5%; z-index: 3; animation-delay: 3s; }
        
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        /* --- Guide Section --- */
        .guide-section {
            margin-top: 80px; 
            background: white; 
            padding: 60px; 
            border-radius: 32px; 
            box-shadow: var(--shadow-md); 
            border: 1px solid #f1f5f9;
        }
        .guide-steps {
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 40px; 
            margin: 40px 0;
        }
        .guide-step { position: relative; padding-left: 16px; }
        .guide-step-num {
            font-size: 80px; 
            font-weight: 900; 
            color: #f1f5f9; 
            position: absolute; 
            top: -45px; 
            left: -20px; 
            z-index: 0;
            line-height: 1;
        }
        .guide-step-content { position: relative; z-index: 1; }
        .guide-step h4 { margin-bottom: 16px; font-size: 20px; font-weight: 700; }
        .guide-step p { font-size: 15px; color: #64748b; line-height: 1.8; }
        
        /* --- Feature Cards --- */
        .feature-icon {
            width: 56px; height: 56px; 
            border-radius: 16px; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 28px; margin-bottom: 20px;
        }
        .bg-blue-light { background: #eff6ff; color: var(--primary); }
        .bg-orange-light { background: #fff7ed; color: #f97316; }
        .bg-green-light { background: #ecfdf5; color: var(--secondary); }
        .bg-purple-light { background: #f5f3ff; color: #8b5cf6; }

        /* --- Language Selector --- */
        .lang-selector { position: relative; }
        .lang-dropdown {
            position: absolute; top: 120%; right: 0; 
            background: white; border: 1px solid var(--border); 
            border-radius: 12px; box-shadow: var(--shadow-lg); 
            overflow: hidden; min-width: 120px; z-index: 101;
            display: none; animation: fadeIn 0.2s ease;
        }
        .lang-dropdown.show { display: block; }
        .lang-opt { 
            padding: 10px 16px; cursor: pointer; font-size: 14px; color: var(--text-main);
            transition: background 0.2s;
        }
        .lang-opt:hover { background: #f8fafc; color: var(--primary); }

        /* --- Modals --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.6); z-index: 1000; display: none;
            align-items: center; justify-content: center; backdrop-filter: blur(8px);
        }
        .modal { 
            background: white; width: 500px; max-width: 92%; padding: 40px; 
            border-radius: 24px; position: relative; 
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); 
            animation: modalPop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 90vh; overflow-y: auto;
        }
        .close-modal { 
            position: absolute; top: 24px; right: 24px; width: 32px; height: 32px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 50%; background: #f1f5f9; color: #64748b;
            font-size: 20px; cursor: pointer; transition: all 0.2s;
        }
        .close-modal:hover { background: #e2e8f0; color: #333; }
        @keyframes modalPop { from { transform: scale(0.95) translateY(10px); opacity: 0; } to { transform: scale(1) translateY(0); opacity: 1; } }

        /* --- Guide Modal Specific --- */
        .guide-content { display: none; animation: fadeIn 0.3s ease; }
        .guide-content.active { display: block; }
        .guide-block { margin-bottom: 24px; padding-bottom: 20px; border-bottom: 1px dashed #e2e8f0; }
        .guide-block:last-child { border-bottom: none; }
        .guide-block h4 { margin-bottom: 12px; font-size: 18px; color: var(--primary); display: flex; align-items: center; gap: 8px; }
        .guide-block p { font-size: 15px; color: #475569; margin-bottom: 12px; line-height: 1.6; }
        .tips-box { background: #f8fafc; padding: 16px; border-radius: 12px; border-left: 4px solid var(--secondary); font-size: 14px; color: #334155; }
        .tips-box ul { padding-left: 20px; margin-top: 8px; }
        .tips-box li { margin-bottom: 4px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- Toast --- */
        .toast-container { position: fixed; bottom: 32px; right: 32px; z-index: 2000; display: flex; flex-direction: column; gap: 12px; }
        .toast {
            background: rgba(30, 41, 59, 0.95); color: white; padding: 14px 28px; border-radius: 50px;
            box-shadow: var(--shadow-lg); font-size: 14px; font-weight: 500;
            backdrop-filter: blur(4px);
        }
        .toast.success { background: rgba(16, 185, 129, 0.95); }
        .toast.error { background: rgba(239, 68, 68, 0.95); }

        /* Mobile */
        @media (max-width: 768px) {
            :root { --nav-height: 64px; }
            
            /* Layout & Spacing */
            .container { padding: 20px 16px; }
            .card { padding: 20px; border-radius: 16px; }
            .section-title { font-size: 24px; }
            .section-desc { font-size: 14px; margin-bottom: 24px; }
            
            /* Navbar */
            .navbar { padding: 0 16px; justify-content: space-between; flex-wrap: nowrap; }
            .logo { font-size: 18px; }
            .logo svg { width: 32px; height: 32px; }
            .logo span { display: none; }
            
            /* Scrollable Nav Pills */
            .nav-links { 
                position: fixed; top: var(--nav-height); left: 0; width: 100%; 
                background: rgba(255,255,255,0.95); backdrop-filter: blur(10px);
                padding: 8px 16px; gap: 12px; 
                border-bottom: 1px solid var(--border);
                overflow-x: auto; -webkit-overflow-scrolling: touch;
                justify-content: flex-start; order: 3;
                box-shadow: var(--shadow-sm);
            }
            .nav-links::-webkit-scrollbar { display: none; }
            .nav-item { 
                padding: 8px 16px; 
                background: #f1f5f9; border-radius: 20px; 
                font-size: 13px; color: var(--text-secondary);
                white-space: nowrap; height: auto; line-height: 1.5;
            }
            .nav-item.active { background: var(--primary); color: white; }
            .nav-item.active::after { display: none; }
            
            /* Adjust body padding for double nav */
            body { padding-top: calc(var(--nav-height) + 54px); }

            /* Hero */
            .hero { grid-template-columns: 1fr; text-align: center; padding: 20px 0 40px; gap: 32px; }
            .hero h1 { font-size: 32px; margin-bottom: 16px; }
            .hero p { font-size: 15px; margin-bottom: 24px; }
            
            .hero-actions { flex-direction: column; width: 100%; gap: 12px; }
            .hero-actions .btn { width: 100%; }
            
            .hero-visual { height: 280px; margin-top: 20px; }
            .hero-card { 
                padding: 16px; min-width: auto; width: 85%; 
                font-size: 13px;
            }
            .c1 { top: 0; left: 50%; transform: translateX(-50%); animation: none; }
            .c2 { bottom: 0; right: 50%; transform: translateX(50%); animation: none; }
            
            /* Grids & Components */
            .grid-2, .grid-3, .grid-4, .guide-steps { grid-template-columns: 1fr; gap: 16px; }
            
            .guide-section { padding: 24px 20px; margin-top: 40px; }
            .guide-step { margin-bottom: 40px; padding-left: 0; text-align: center; }
            .guide-step-num { 
                position: static; display: block; margin: 0 auto 10px; 
                font-size: 48px; line-height: 1;
            }
            
            /* Modals */
            .modal { width: 92%; padding: 24px; max-height: 85vh; }
            .close-modal { top: 16px; right: 16px; }
            
            /* Hide Login Text on Mobile if needed, or keep small */
            #loginBtn { padding: 6px 12px; font-size: 13px; }

            /* Language Selector Mobile */
            .lang-selector { display: none; } /* Hide on mobile for simplicity or adapt */
            
            /* Hospital Filter Mobile Fix */
            .hospital-header { flex-direction: column !important; align-items: flex-start !important; gap: 16px; }
            .filter-group { width: 100%; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
            .filter-group .form-select { width: 100% !important; }

            /* Guide Modal Tabs Mobile Fix */
            #guide-tabs { gap: 12px; }
            #guide-tabs .tab-btn { 
                text-align: center; line-height: 1.4; padding: 10px 0; font-size: 13px; flex: 1;
            }
            .tab-num { font-size: 16px; font-weight: 800; display: block; margin-bottom: 4px; color: var(--primary); }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">
            <svg width="40" height="40" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M85 50 A 35 35 0 1 1 50 15" stroke="var(--primary)" stroke-width="6" stroke-linecap="round"/>
                <path d="M30 68 Q 50 78 70 68" stroke="var(--primary)" stroke-width="5" fill="none"/>
                <path d="M30 78 Q 50 88 70 78" stroke="var(--primary)" stroke-width="5" fill="none"/>
                <path d="M55 55 L 80 30 M 80 30 L 68 30 M 80 30 L 80 42" stroke="var(--primary)" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M15 50 L 30 50 L 40 25 L 50 75 L 60 45" stroke="var(--secondary)" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M55 40 Q 85 10 90 10 Q 95 45 55 40 Z" fill="var(--secondary)"/>
            </svg>
            HFA <span>è·¨å¢ƒåŒ»ç–—æœåŠ¡ä¸­å¿ƒ</span>
        </div>
        <div class="nav-links">
            <div class="nav-item active" data-target="home" data-i18n="nav.home">Home</div>
            <div class="nav-item" data-target="care" data-i18n="nav.care">Care Hub</div>
            <div class="nav-item" data-target="protection" data-i18n="nav.protection">Protection Hub</div>
            <div class="nav-item" data-target="wellness" data-i18n="nav.wellness">Wellness Hub</div>
            <div class="nav-item" data-target="family" data-i18n="nav.family">Family Hub</div>
            <div class="nav-item" data-target="myhfa" data-i18n="nav.myhfa">My HFA</div>
        </div>
        <div style="display: flex; gap: 12px; align-items: center;">
            <div class="lang-selector">
                <button class="btn btn-secondary" id="langBtn" style="padding: 8px 12px; font-size: 14px;">ğŸŒ ç®€ä½“</button>
                <div id="langDropdown" class="lang-dropdown">
                    <div class="lang-opt" onclick="window.i18n.setLang('zh-CN')">ç®€ä½“ä¸­æ–‡</div>
                    <div class="lang-opt" onclick="window.i18n.setLang('zh-HK')">ç¹é«”ä¸­æ–‡</div>
                    <div class="lang-opt" onclick="window.i18n.setLang('en-US')">English</div>
                </div>
            </div>
            <button class="btn btn-secondary" id="loginBtn" style="padding: 8px 20px; font-size: 14px;" data-i18n="nav.login">ç™»å½• / æ³¨å†Œ</button>
        </div>
    </nav>

    <div class="container">
        <!-- HOME SECTION -->
        <section id="home" class="page-section active">
            <div class="hero">
                <div class="hero-content">
                    <h1 data-i18n="hero.title">æ¸¯äººè·¨å¢ƒå°±åŒ»<br>å®‰å¿ƒæ— å¿§æ–°é€‰æ‹©</h1>
                    <p data-i18n="hero.desc">è¿æ¥é¦™æ¸¯ä¸æ·±åœ³ä¼˜è´¨åŒ»ç–—èµ„æºã€‚å…¨æµç¨‹å°±åŒ»æŒ‡å¯¼ã€è´¹ç”¨é€æ˜é¢„ä¼°ã€ç†èµ”ææ–™è¾…åŠ©åŠå®¶åº­å¥åº·ååŒï¼Œä¸€ç«™å¼è§£å†³æ‚¨çš„è·¨å¢ƒåŒ»ç–—çƒ¦æ¼ã€‚</p>
                    <div class="hero-actions">
                        <button class="btn btn-primary" onclick="window.router.navigate('care')" data-i18n="hero.btn1">æˆ‘è¦å»æ·±åœ³çœ‹ç—… â”</button>
                        <button class="btn btn-secondary" onclick="window.router.navigate('protection')" data-i18n="hero.btn2">æŸ¥çœ‹èƒ½æŠ¥é”€å¤šå°‘</button>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="hero-card c1">
                        <div class="flex-center gap-2 mb-4" style="justify-content: flex-start;">
                            <span style="background:#dbeafe; color:#2563eb; padding:8px; border-radius:10px; font-size: 18px;">ğŸ¥</span>
                            <div style="font-weight: 600; font-size: 16px;">é¢„çº¦æˆåŠŸ</div>
                        </div>
                        <div style="font-size: 14px; color: #64748b; line-height: 1.5;">æ¸¯å¤§æ·±åœ³åŒ»é™¢ - æ¶ˆåŒ–å†…ç§‘<br><span style="color: var(--text-main); font-weight: 500;">2024-03-15 09:30</span></div>
                    </div>
                    <div class="hero-card c2">
                        <div class="flex-center gap-2 mb-4" style="justify-content: flex-start;">
                            <span style="background:#dcfce7; color:#10b981; padding:8px; border-radius:10px; font-size: 18px;">ğŸ’°</span>
                            <div style="font-weight: 600; font-size: 16px;">ç†èµ”é¢„ä¼°</div>
                        </div>
                        <div style="font-size: 14px; color: #64748b;">é¢„è®¡å¯æŠ¥é”€é¢åº¦<br><span style="font-size:24px; font-weight:800; color:#10b981; letter-spacing: -0.5px;">HK$ 4,500</span></div>
                    </div>
                </div>
            </div>

            <div class="grid-4">
                <div class="card clickable" onclick="window.router.navigate('care')">
                    <div class="feature-icon bg-blue-light">ğŸš‘</div>
                    <h3 data-i18n="card.guide.title">å°±åŒ»æŒ‡å¼•</h3>
                    <p style="font-size: 14px; color: #64748b; margin-top: 8px; line-height:1.6;" data-i18n="card.guide.desc">èº«ä½“ä¸é€‚ä¸çŸ¥å»å“ªå®¶åŒ»é™¢ï¼ŸæŸ¥è¯¢å°±è¯Šæµç¨‹ä¸ä¸‰ç”²æ¨èã€‚</p>
                </div>
                <div class="card clickable" onclick="window.router.navigate('care')">
                    <div class="feature-icon bg-orange-light">ğŸ’´</div>
                    <h3 data-i18n="card.cost.title">è´¹ç”¨é¢„ä¼°</h3>
                    <p style="font-size: 14px; color: #64748b; margin-top: 8px; line-height:1.6;" data-i18n="card.cost.desc">çœ‹ç—…å‰ç®—ä¸€ç®—ï¼Œå¿ƒé‡Œæœ‰æ•°ã€‚æ”¯æŒå…¬ç«‹ä¸ç§ç«‹ä»·æ ¼å¯¹æ¯”ã€‚</p>
                </div>
                <div class="card clickable" onclick="window.router.navigate('wellness')">
                    <div class="feature-icon bg-green-light">ğŸ§˜</div>
                    <h3 data-i18n="card.wellness.title">å¥åº·å¢å€¼</h3>
                    <p style="font-size: 14px; color: #64748b; margin-top: 8px; line-height:1.6;" data-i18n="card.wellness.desc">ä¸¥é€‰æ·±åœ³é«˜ç«¯ä½“æ£€ã€æ´—ç‰™åŠä¸­åŒ»æœåŠ¡ï¼Œæ€§ä»·æ¯”ä¹‹é€‰ã€‚</p>
                </div>
                <div class="card clickable" onclick="window.router.navigate('family')">
                    <div class="feature-icon bg-purple-light">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</div>
                    <h3 data-i18n="card.family.title">å®¶åº­ååŒ</h3>
                    <p style="font-size: 14px; color: #64748b; margin-top: 8px; line-height:1.6;" data-i18n="card.family.desc">ä¸€ç«™å¼ç®¡ç†çˆ¶æ¯ä¸å­å¥³å¥åº·æ¡£æ¡ˆï¼Œè¿œç¨‹é¢„çº¦æ›´æ”¾å¿ƒã€‚</p>
                </div>
            </div>
            
            <div class="guide-section">
                <div class="text-center mb-4">
                    <h3 class="section-title">æ–°æ‰‹é€šå…³æŒ‡å—</h3>
                    <p class="section-desc" style="margin: 10px auto 0;">è·¨å¢ƒåŒ»ç–—å…¨æµç¨‹è¯¦è§£ï¼Œä¸‰æ­¥æå®š</p>
                </div>
                
                <div class="guide-steps">
                    <div class="guide-step">
                        <div class="guide-step-num">01</div>
                        <div class="guide-step-content">
                            <h4>è¡Œå‰å‡†å¤‡</h4>
                            <p>
                                â€¢ <strong>æ”¯ä»˜ç»‘å®šï¼š</strong> å¾®ä¿¡/æ”¯ä»˜å®å…³è”é¦™æ¸¯å¡ã€‚<br>
                                â€¢ <strong>é¢„çº¦æŒ‚å·ï¼š</strong> Care Hub æ™ºèƒ½å¯¼è¯Šã€‚<br>
                                â€¢ <strong>èµ„æ–™å¤‡ä»½ï¼š</strong> è¯ä»¶ä¸è¿‡å¾€ç—…å†ã€‚
                            </p>
                        </div>
                    </div>
                    <div class="guide-step">
                         <div class="guide-step-num">02</div>
                        <div class="guide-step-content">
                            <h4>å°±è¯Šå½“æ—¥</h4>
                            <p>
                                â€¢ <strong>æŠ¥åˆ°å–å·ï¼š</strong> èº«ä»½è¯/å›ä¹¡è¯è‡ªåŠ©æŠ¥åˆ°ã€‚<br>
                                â€¢ <strong>åˆ†æ®µç¼´è´¹ï¼š</strong> æŒ‚å·/æ£€æŸ¥/å–è¯åˆ†åˆ«ä»˜ã€‚<br>
                                â€¢ <strong>å…³é”®åŠ¨ä½œï¼š</strong> ç´¢è¦ç­¾åç—…å†ä¸å‘ç¥¨ã€‚
                            </p>
                        </div>
                    </div>
                    <div class="guide-step">
                         <div class="guide-step-num">03</div>
                        <div class="guide-step-content">
                            <h4>åç»­ä¸ç†èµ”</h4>
                            <p>
                                â€¢ <strong>å–è¯ä»£ç…ï¼š</strong> ä¸­è¯å¯å¿«é€’å›æ¸¯ã€‚<br>
                                â€¢ <strong>è‡ªåŠ¨æé†’ï¼š</strong> ç³»ç»Ÿæ¨é€å¤è¯Šæ—¥æœŸã€‚<br>
                                â€¢ <strong>ç†èµ”åŒ…ï¼š</strong> Protection Hub è‡ªåŠ¨ç”Ÿæˆã€‚
                            </p>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <button class="btn btn-secondary" id="btn-view-guide">æŸ¥çœ‹å›¾æ–‡è¯¦è§£ ğŸ“–</button>
                </div>
            </div>
        </section>

        <!-- CARE HUB -->
        <section id="care" class="page-section">
            <h2 class="section-title" data-i18n="care.title">Care Hub å°±åŒ»å…³æ€€ä¸­å¿ƒ</h2>
            <p class="section-desc" data-i18n="care.desc">æ™ºèƒ½è§„åˆ’æ‚¨çš„æ·±åœ³å°±åŒ»è·¯å¾„ï¼Œé€æ˜åŒ–è´¹ç”¨ä¸æµç¨‹ã€‚</p>

            <div class="grid-2">
                <!-- è·¯å¾„è§„åˆ’å™¨ -->
                <div class="card">
                    <h3>ğŸ©º æ™ºèƒ½å¯¼è¯Š</h3>
                    <div class="form-group">
                        <label class="form-label">ç—‡çŠ¶æè¿°</label>
                        <input type="text" id="care-symptom" class="form-input" placeholder="ä¾‹å¦‚ï¼šåå¤èƒƒç—›ã€èƒƒèƒ€ã€å¤´æ™•ã€éª¨æŠ˜...">
                    </div>
                    <div class="grid-2">
                        <div class="form-group">
                            <label class="form-label">å°±è¯Šç±»å‹</label>
                            <select class="form-select">
                                <option>æ™®é€šé—¨è¯Š</option>
                                <option>ä¸“å®¶é—¨è¯Š</option>
                                <option>æ€¥è¯Š</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">é¦™æ¸¯ä¿é™©</label>
                            <select class="form-select">
                                <option>æœ‰ï¼ŒåŒ…å«å†…åœ°åŒ»ç–—</option>
                                <option>æœ‰ï¼Œä½†ä¸ç¡®å®š</option>
                                <option>æ²¡æœ‰</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="btn-care-plan" style="width: 100%;">ç”Ÿæˆå°±åŒ»å»ºè®®</button>
                    
                    <div id="care-result" class="hidden" style="margin-top: 20px; background: #f0f9ff; padding: 20px; border-radius: 12px; border: 1px solid #e0f2fe;">
                        <!-- JS Populate -->
                    </div>
                </div>

                <!-- è´¹ç”¨ä¼°ç®— -->
                <div class="card">
                    <h3>ğŸ’° è´¹ç”¨åŒºé—´ä¼°ç®—</h3>
                    <div class="form-group">
                        <label class="form-label">åŒ»é™¢ç±»å‹</label>
                        <select id="cost-hospital-type" class="form-select">
                            <option value="public">å…¬ç«‹ä¸‰ç”² (æ€§ä»·æ¯”é«˜)</option>
                            <option value="private">ç§ç«‹/é«˜ç«¯ (æœåŠ¡å¥½)</option>
                        </select>
                    </div>
                    <label class="form-label">é¢„è®¡æ£€æŸ¥é¡¹ç›® (ç³»ç»Ÿè‡ªåŠ¨æ¨è)</label>
                    <div id="cost-checkboxes" style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 24px;">
                        <!-- Dynamic checkboxes will be rendered here -->
                         <div style="color:#94a3b8; font-size:14px; padding:10px 0;">è¯·å…ˆå·¦ä¾§è¾“å…¥ç—‡çŠ¶ç”Ÿæˆå»ºè®®...</div>
                    </div>
                    
                    <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid #e2e8f0; display:flex; justify-content:space-between; align-items:center;">
                        <span style="font-size:14px; color:#64748b;">é¢„ä¼°æ€»è´¹ç”¨ (CNY)</span>
                        <span style="font-size: 28px; font-weight: 800; color: var(--accent);" id="cost-display">--</span>
                    </div>
                </div>
            </div>

            <div class="hospital-header" style="margin: 40px 0 20px; display: flex; justify-content: space-between; align-items: center;">
                <h3 class="section-title" style="margin:0;">ğŸ¥ æ¨èåŒ»é™¢åˆ—è¡¨</h3>
                <div class="filter-group" style="display: flex; gap: 12px;">
                    <select id="filter-area" class="form-select" style="width: 140px; padding-right: 30px;">
                        <option value="all">æ‰€æœ‰åŒºåŸŸ</option>
                        <option value="futian">ç¦ç”°åŒº</option>
                        <option value="luohu">ç½—æ¹–åŒº</option>
                        <option value="nanshan">å—å±±åŒº</option>
                        <option value="baoan">å®å®‰åŒº</option>
                        <option value="longgang">é¾™å²—åŒº</option>
                    </select>
                    <select id="filter-type" class="form-select" style="width: 140px; padding-right: 30px;">
                        <option value="all">æ‰€æœ‰ç±»å‹</option>
                        <option value="public">å…¬ç«‹ä¸‰ç”²</option>
                        <option value="private">ç§ç«‹é«˜ç«¯</option>
                    </select>
                </div>
            </div>
            
            <div id="hospital-list">
                <!-- JS Populated -->
            </div>
        </section>

        <!-- PROTECTION HUB -->
        <section id="protection" class="page-section">
            <h2 class="section-title" data-i18n="protection.title">Protection Hub ç†èµ”ä¿éšœä¸­å¿ƒ</h2>
            <div style="background: #fffbeb; color: #b45309; padding: 16px; border-radius: 12px; margin-bottom: 32px; border: 1px solid #fcd34d; font-size: 14px;">
                <strong data-i18n="protection.warn.title">âš ï¸ é‡è¦æç¤ºï¼š</strong> <span data-i18n="protection.warn.desc">æœ¬å¹³å°ä»…æä¾›ä¿¡æ¯è¾…åŠ©ä¸èµ„æ–™æ•´ç†ï¼Œä¸ä»£è¡¨ä¿é™©å…¬å¸å®˜æ–¹æ‰¿è¯ºã€‚å…·ä½“èµ”ä»˜ä»¥æ‚¨çš„ä¿å•æ¡æ¬¾ä¸ºå‡†ã€‚</span>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>ğŸ§ å¯æŠ¥é”€æ€§è‡ªæŸ¥</h3>
                    <div class="form-group">
                        <label class="form-label">æ”¶è´¹é¡¹ç›®åç§°</label>
                        <div class="input-group">
                            <input type="text" class="form-input" placeholder="ä¾‹å¦‚ï¼šèƒƒé•œæ£€æŸ¥ã€æ´—ç‰™">
                            <button class="input-group-btn" title="ä¸Šä¼ å•æ®è‡ªåŠ¨è¯†åˆ«">ğŸ“·</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">è´¹ç”¨é‡‘é¢ (CNY)</label>
                        <input type="number" id="claim-amount" class="form-input" placeholder="0" min="0">
                    </div>
                    <button class="btn btn-primary" id="btn-check-claim">åˆ¤æ–­å¯èƒ½æ€§</button>
                    <div id="claim-result" class="hidden" style="margin-top: 16px; padding: 12px; border-radius: 8px;"></div>
                </div>

                <div class="card">
                    <h3>ğŸ“‘ ç†èµ”ææ–™æ¸…å•</h3>
                    <div class="grid-2">
                         <div class="form-group">
                            <label class="form-label">ä¿é™©å…¬å¸</label>
                            <select id="insurance-company-select" class="form-select">
                                <option value="AIA">AIA å‹é‚¦</option>
                                <option value="Prudential">Prudential ä¿è¯š</option>
                                <option value="Manulife">Manulife å®åˆ©</option>
                                <option value="Others">å…¶ä»– / ä¸ç¡®å®š</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">å…·ä½“é™©ç§</label>
                            <select id="insurance-plan-select" class="form-select">
                                <!-- Dynamic options -->
                            </select>
                        </div>
                    </div>

                    <div class="tabs" style="margin-bottom: 16px; gap: 20px;">
                        <div class="tab-btn active" data-tab="mat-outpatient">é—¨è¯Šå°±åŒ»</div>
                        <div class="tab-btn" data-tab="mat-inpatient">ä½é™¢æ²»ç–—</div>
                    </div>
                    <div id="mat-content" style="background: #f8fafc; padding: 16px; border-radius: 12px; min-height: 120px;">
                        <!-- Content -->
                    </div>
                </div>
            </div>

            <div style="margin-top: 32px;">
                <h3 class="section-title">ğŸ›¡ï¸ æ¸¯äººå†…åœ°ä¿é™©ç²¾é€‰æ¨è</h3>
                <p class="section-desc">è¡¥å……é¦™æ¸¯ä¿é™©çš„ä¸è¶³ï¼Œæ€§ä»·æ¯”æé«˜çš„å†…åœ°åŒ»ç–—ä¿éšœã€‚</p>
                <div class="grid-3">
                    <div class="card">
                        <span class="tag blue">ç™¾ä¸‡åŒ»ç–—é™©</span>
                        <h4 style="margin: 10px 0;">å†…åœ°ç™¾ä¸‡åŒ»ç–—é™© (e.g. ä¼—å®‰å°Šäº«eç”Ÿ)</h4>
                        <p style="font-size: 13px; color: #64748b; margin-bottom: 16px;">
                            <strong>ä¿é¢ï¼š</strong> 300ä¸‡-600ä¸‡<br>
                            <strong>ä¿è´¹ï¼š</strong> çº¦ Â¥300-1000/å¹´<br>
                            <strong>ç‰¹ç‚¹ï¼š</strong> è¦†ç›–ä½é™¢å¤§ç—…ï¼Œå…èµ”é¢é€šå¸¸1ä¸‡ã€‚é€‚åˆä½œä¸ºå¤§ç—…å…œåº•ã€‚
                        </p>
                        <button class="btn btn-secondary" style="width: 100%; font-size: 12px;">æŸ¥çœ‹è¯¦æƒ…</button>
                    </div>
                    <div class="card">
                        <span class="tag orange">å¤§æ¹¾åŒºä¸“å±</span>
                        <h4 style="margin: 10px 0;">å¤§æ¹¾åŒºä¸“å±é‡ç–¾é™©</h4>
                        <p style="font-size: 13px; color: #64748b; margin-bottom: 16px;">
                            <strong>ä¿é¢ï¼š</strong> çµæ´»å¯é€‰<br>
                            <strong>ç‰¹ç‚¹ï¼š</strong> é’ˆå¯¹æ¹¾åŒºé«˜å‘é‡ç–¾é¢å¤–èµ”ä»˜ï¼Œè´¹ç‡è¾ƒé¦™æ¸¯é‡ç–¾é™©æœ‰ä¼˜åŠ¿ï¼ŒæŠ•ä¿ç®€ä¾¿ã€‚
                        </p>
                        <button class="btn btn-secondary" style="width: 100%; font-size: 12px;">æŸ¥çœ‹è¯¦æƒ…</button>
                    </div>
                    <div class="card">
                        <span class="tag green">é«˜ç«¯é—¨è¯Š</span>
                        <h4 style="margin: 10px 0;">é«˜ç«¯é—¨è¯ŠåŒ»ç–—é™© (Msh/Bupa)</h4>
                        <p style="font-size: 13px; color: #64748b; margin-bottom: 16px;">
                            <strong>èŒƒå›´ï¼š</strong> ç§ç«‹åŒ»é™¢/æ˜‚è´µåŒ»é™¢ç›´ä»˜<br>
                            <strong>ç‰¹ç‚¹ï¼š</strong> è¦†ç›–æ—¥å¸¸é—¨è¯Šã€ç‰™ç§‘ã€ä½“æ£€ï¼Œæ— éœ€æ’é˜Ÿï¼Œä½“éªŒæä½³ã€‚
                        </p>
                        <button class="btn btn-secondary" style="width: 100%; font-size: 12px;">æŸ¥çœ‹è¯¦æƒ…</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- WELLNESS HUB -->
        <section id="wellness" class="page-section">
            <h2 class="section-title" data-i18n="wellness.title">Wellness Hub å¥åº·å¢å€¼ä¸­å¿ƒ</h2>
            <div class="tabs" id="wellness-tabs">
                <div class="tab-btn active" data-cat="checkup">é«˜ç«¯ä½“æ£€</div>
                <div class="tab-btn" data-cat="dental">ç‰™ç§‘/å£è…”</div>
                <div class="tab-btn" data-cat="tcm">ä¸­åŒ»è°ƒç†</div>
            </div>
            
            <div class="grid-3" id="wellness-grid">
                <!-- JS Populated -->
            </div>
            
            <div class="card" style="margin-top: 32px; background: linear-gradient(to right, #ecfdf5, #ffffff); border: 1px solid #d1fae5;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3>æˆ‘çš„å¥åº·ç§¯åˆ†: <span style="color: var(--secondary); font-size: 32px; font-weight:800;">1,250</span></h3>
                        <p style="font-size: 14px; color: #065f46;">é€šè¿‡ä½“æ£€ã€å°±åŒ»æ‰“å¡è·å–ç§¯åˆ†ï¼Œå¯å…‘æ¢å…è´¹æ´ç‰™æˆ–æŠµæ‰£ç°é‡‘ã€‚</p>
                    </div>
                    <button class="btn btn-secondary" onclick="window.modals.open('mall-modal')">è¿›å…¥ç§¯åˆ†å•†åŸ</button>
                </div>
            </div>
        </section>

        <!-- FAMILY HUB -->
        <section id="family" class="page-section">
            <h2 class="section-title" data-i18n="family.title">Family Hub å®¶åº­å¥åº·ååŒ</h2>
            <div class="grid-3" id="family-grid">
                <!-- JS Populated -->
            </div>
            
            <div class="card" style="margin-top: 32px; background: #fefce8; border: 1px solid #fef08a;">
                <h4 style="color: #854d0e; margin-bottom: 8px;">ğŸ”” å®¶åº­å¥åº·æé†’</h4>
                <ul style="list-style: none; padding: 0;">
                    <li style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #eab308; color: #a16207; font-size:14px;">
                        <span>æ¯äº²çš„é™å‹è¯å¿«ç”¨å®Œäº†ï¼Œè¯·æé†’å¤è¯Šã€‚</span>
                        <span style="font-weight:600;">3å¤©å</span>
                    </li>
                     <li style="display: flex; justify-content: space-between; padding: 8px 0; color: #a16207; font-size:14px;">
                        <span>é…å¶æ´ç‰™é¢„çº¦å»ºè®®ã€‚</span>
                        <span>ä¸‹å‘¨</span>
                    </li>
                </ul>
            </div>
        </section>
        
        <!-- MY HFA -->
        <section id="myhfa" class="page-section">
            <h2 class="section-title" data-i18n="myhfa.title">My HFA ä¸ªäººä¸­å¿ƒ</h2>
            <div class="grid-2">
                 <div class="card">
                    <div style="display:flex; align-items:center; gap:20px; margin-bottom:20px;">
                        <div style="width:80px; height:80px; background:var(--primary); border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-size:32px;">é™ˆ</div>
                        <div>
                            <h3>Chan Tai Man</h3>
                            <div style="display:flex; gap:8px; margin-top:8px;">
                                <span class="tag blue">æ™®é€šä¼šå‘˜</span>
                                <span class="tag green">ç§¯åˆ† 1250</span>
                            </div>
                        </div>
                    </div>
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:16px;">
                        <button class="btn btn-secondary" style="font-size:13px;" onclick="window.modals.open('upload-data-modal')">ğŸ“‚ ä¸Šä¼ åŒ»ç–—æ–‡æ¡£</button>
                        <button class="btn btn-secondary" style="font-size:13px;">âš™ï¸ è´¦æˆ·è®¾ç½®</button>
                    </div>
                </div>
                
                <div class="card" style="background:#f8fafc;">
                    <h3 style="margin-bottom:16px;">æœªæ¥åŒ»ç–—æ”¯å‡ºé¢„æµ‹æ¨¡å‹</h3>
                    <div style="display:flex; justify-content:space-between; align-items:baseline; margin-bottom:10px;">
                        <span style="color:#64748b; font-size:14px;">é¢„è®¡å¹´åº¦æ€»æ”¯å‡º</span>
                        <span id="predicted-expense" style="font-size:32px; font-weight:800; color:var(--text-main);">--</span>
                    </div>
                    <div style="margin-bottom:20px;">
                        <span style="color:#64748b; font-size:14px;">é£é™©ç­‰çº§ï¼š</span>
                        <span id="risk-badge" class="tag" style="background:#e2e8f0; color:#64748b;">éœ€å®Œå–„æ•°æ®</span>
                    </div>
                    <button class="btn btn-primary" style="width:100%;" onclick="window.modals.open('prediction-modal')">å®Œå–„ç”»åƒä»¥è·å–é¢„æµ‹</button>
                </div>
            </div>
        </section>
    </div>

    <!-- MODALS -->
    <!-- Login Modal -->
    <div id="login-modal" class="modal-overlay">
        <div class="modal" style="width:400px;">
            <div class="close-modal">&times;</div>
            <h3 style="text-align:center; margin-bottom:24px;">æ¬¢è¿å›åˆ° HFA</h3>
            <div class="form-group">
                <label class="form-label">æ‰‹æœºå· / é‚®ç®±</label>
                <input type="text" class="form-input" placeholder="è¾“å…¥è´¦å·">
            </div>
            <div class="form-group">
                <label class="form-label">å¯†ç </label>
                <input type="password" class="form-input" placeholder="è¾“å…¥å¯†ç ">
            </div>
            <button class="btn btn-primary" style="width:100%;">ç™»å½•</button>
        </div>
    </div>

    <!-- Hospital Detail Modal -->
    <div id="hospital-modal" class="modal-overlay">
        <div class="modal" style="width: 600px;">
            <div class="close-modal">&times;</div>
            <h3 id="hospital-modal-title" style="margin-bottom: 10px;">åŒ»é™¢åç§°</h3>
            <div id="hospital-modal-tags" style="margin-bottom: 20px;"></div>
            
            <p class="section-separator">ç®€ä»‹</p>
            <p id="hospital-modal-desc" style="color: #475569; margin-bottom: 20px;"></p>
            
            <p class="section-separator">åœ°å€ä¸äº¤é€š</p>
            <p style="margin-bottom: 5px;">ğŸ“ <span id="hospital-modal-addr"></span></p>
            <p style="margin-bottom: 20px;">ğŸš‡ <span id="hospital-modal-transport"></span></p>
            
            <button id="hospital-book-btn" class="btn btn-primary" style="width: 100%;">ç«‹å³é¢„çº¦</button>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="booking-modal" class="modal-overlay">
        <div class="modal" style="width: 500px;">
            <div class="close-modal">&times;</div>
            <h3 style="margin-bottom: 20px;">ç¡®è®¤é¢„çº¦ä¿¡æ¯</h3>
            <div style="background: #f1f5f9; padding: 12px; border-radius: 8px; margin-bottom: 20px; font-weight: 600; color: var(--primary);" id="booking-item-name">
                --
            </div>
            <div class="grid-2">
                <div class="form-group">
                    <label class="form-label">å°±è¯Šç§‘å®¤</label>
                    <select id="booking-dept" class="form-select">
                        <option>å…¨ç§‘</option>
                        <option>æ¶ˆåŒ–å†…ç§‘</option>
                        <option>éª¨ç§‘</option>
                        <option>å¦‡äº§ç§‘</option>
                        <option>ä¸­åŒ»ç§‘</option>
                        <option>å£è…”ç§‘</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">æ„å‘åŒ»å¸ˆ</label>
                    <select id="booking-doctor" class="form-select">
                        <option>ç³»ç»Ÿæ™ºèƒ½æ¨è</option>
                        <option>ä¸»ä»»åŒ»å¸ˆ (éœ€åŠ æ”¶è¯Šé‡‘)</option>
                        <option>å‰¯ä¸»ä»»åŒ»å¸ˆ</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">æœŸæœ›æ—¥æœŸ</label>
                <input type="date" class="form-input">
            </div>
            <div class="form-group">
                <label class="form-label">å°±è¯Šäºº</label>
                <select id="booking-patient-select" class="form-select">
                    <!-- Dynamic -->
                </select>
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="window.modals.close('booking-modal'); window.toast('é¢„çº¦æäº¤æˆåŠŸï¼è¯·ç•™æ„çŸ­ä¿¡é€šçŸ¥', 'success');">æäº¤é¢„çº¦ç”³è¯·</button>
        </div>
    </div>

    <!-- Member Detail Modal -->
    <div id="member-detail-modal" class="modal-overlay">
        <div class="modal">
            <div class="close-modal">&times;</div>
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h3 id="member-detail-name">Member Name</h3>
                <span id="member-detail-role" class="tag blue">Role</span>
            </div>
            
            <div class="card" style="padding: 20px; background: #f8fafc; border:none; margin-bottom: 20px;">
                <h4 style="font-size:16px; margin-bottom:12px;">å¥åº·æ¡£æ¡ˆå¤‡æ³¨</h4>
                <p id="member-health-notes" style="font-size:14px; color:#64748b; line-height: 1.6;">--</p>
            </div>

            <div class="card" style="padding: 20px; background: #fffbeb; border:none; margin-bottom: 20px;">
                <h4 style="font-size:16px; margin-bottom:12px;">æœ€è¿‘åŠ¨æ€</h4>
                <p id="member-last-record" style="font-size:14px; color:#854d0e;">--</p>
            </div>

            <h4 style="font-size:16px; margin-bottom:12px;">æ ¸å¿ƒå¥åº·æŒ‡æ ‡</h4>
            <div style="margin-bottom: 16px;">
                <div style="display:flex; justify-content:space-between; font-size:13px; margin-bottom:4px;">
                    <span>è¡€å‹ (mmHg)</span>
                    <span id="member-bp-val" style="font-weight:600;">--</span>
                </div>
                <div class="progress-bar"><div id="member-bp-bar" class="progress-fill" style="width:0%; background:#10b981;"></div></div>
            </div>
             <div style="margin-bottom: 24px;">
                <div style="display:flex; justify-content:space-between; font-size:13px; margin-bottom:4px;">
                    <span>è¡€ç³– (mmol/L)</span>
                    <span id="member-bs-val" style="font-weight:600;">--</span>
                </div>
                <div class="progress-bar"><div id="member-bs-bar" class="progress-fill" style="width:0%; background:#3b82f6;"></div></div>
            </div>

            <button class="btn btn-secondary" style="width:100%;">æŸ¥çœ‹å®Œæ•´å¥åº·æ¡£æ¡ˆ</button>
        </div>
    </div>

    <!-- Add Member Modal -->
    <div id="add-member-modal" class="modal-overlay">
        <div class="modal" style="width:400px;">
            <div class="close-modal">&times;</div>
            <h3>æ·»åŠ å®¶åº­æˆå‘˜</h3>
            <div class="form-group" style="margin-top:20px;">
                <label class="form-label">çœŸå®å§“å</label>
                <input type="text" id="new-member-name" class="form-input" placeholder="è¯·è¾“å…¥å§“å">
            </div>
            <div class="form-group">
                <label class="form-label">å…³ç³»</label>
                <select id="new-member-role" class="form-select">
                    <option>çˆ¶äº²</option>
                    <option>æ¯äº²</option>
                    <option>é…å¶</option>
                    <option>å­å¥³</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">å¥åº·çŠ¶å†µ/æ—¢å¾€ç—…å²</label>
                <textarea id="new-member-notes" class="form-textarea" placeholder="ä¾‹å¦‚ï¼šèŠ±ç²‰è¿‡æ•ã€é«˜è¡€å‹äºŒçº§ã€æ­£åœ¨æœç”¨é™å‹è¯..."></textarea>
            </div>
            <button class="btn btn-primary" style="width:100%;" onclick="window.logic.addMember()">ç¡®è®¤æ·»åŠ </button>
        </div>
    </div>
    
    <!-- Points Mall Modal -->
    <div id="mall-modal" class="modal-overlay">
        <div class="modal" style="width:600px;">
            <div class="close-modal">&times;</div>
            <h3>ç§¯åˆ†å…‘æ¢å•†åŸ</h3>
            <p style="color:#64748b; margin-bottom:20px;">å½“å‰å¯ç”¨ç§¯åˆ†ï¼š<strong style="color:var(--secondary);">1,250</strong></p>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:16px;">
                <div style="border:1px solid #e2e8f0; border-radius:12px; padding:16px;">
                    <h4>å…è´¹æ´ç‰™åˆ¸</h4>
                    <p style="color:#f59e0b; font-weight:bold; margin:8px 0;">1,000 ç§¯åˆ†</p>
                    <button class="btn btn-primary" style="width:100%; font-size:13px; padding:8px;" onclick="window.toast('å…‘æ¢æˆåŠŸï¼åˆ¸ç å·²å‘é€è‡³æ‰‹æœº', 'success')">ç«‹å³å…‘æ¢</button>
                </div>
                 <div style="border:1px solid #e2e8f0; border-radius:12px; padding:16px;">
                    <h4>HK$ 100 ä½“æ£€æŠµæ‰£</h4>
                    <p style="color:#f59e0b; font-weight:bold; margin:8px 0;">500 ç§¯åˆ†</p>
                    <button class="btn btn-primary" style="width:100%; font-size:13px; padding:8px;" onclick="window.toast('å…‘æ¢æˆåŠŸï¼ä¸‹å•æ—¶è‡ªåŠ¨æŠµæ‰£', 'success')">ç«‹å³å…‘æ¢</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Prediction Data Modal -->
    <div id="prediction-modal" class="modal-overlay">
        <div class="modal" style="width: 700px;">
            <div class="close-modal">&times;</div>
            <h3 style="margin-bottom: 24px;">å®Œå–„å¥åº·ç”»åƒ</h3>
            <div class="grid-2">
                <div>
                    <p class="section-separator">1. äººå£å­¦ç‰¹å¾</p>
                    <div class="form-group">
                        <label class="form-label">å¹´é¾„</label>
                        <input type="number" id="pred-age" class="form-input" value="35">
                    </div>
                    <div class="form-group">
                        <label class="form-label">æ€§åˆ«</label>
                        <select id="pred-gender" class="form-select"><option value="m">ç”·</option><option value="f">å¥³</option></select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">å®¶æ—ç—…å² (å¤šé€‰)</label>
                        <div style="display:flex; flex-wrap:wrap; gap:10px;">
                            <label><input type="checkbox"> é«˜è¡€å‹</label>
                            <label><input type="checkbox"> ç³–å°¿ç—…</label>
                            <label><input type="checkbox"> è‚¿ç˜¤</label>
                        </div>
                    </div>
                </div>
                <div>
                    <p class="section-separator">2. è¡Œä¸ºç‰¹å¾</p>
                    <div class="form-group">
                        <label class="form-label">æ¯å‘¨è¿åŠ¨é¢‘ç‡</label>
                        <select id="pred-exercise" class="form-select">
                            <option value="0">ä»ä¸</option>
                            <option value="1">1-2æ¬¡</option>
                            <option value="3">3æ¬¡ä»¥ä¸Š</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ç”Ÿæ´»ä¹ æƒ¯</label>
                        <select id="pred-habit" class="form-select">
                            <option value="none">æ— ä¸è‰¯å—œå¥½</option>
                            <option value="smoke">å¸çƒŸ</option>
                            <option value="drink">é¥®é…’</option>
                            <option value="both">çƒŸé…’å‡æ²¾</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="grid-2">
                <div>
                    <p class="section-separator">3. åŒ»ç–—ç‰¹å¾</p>
                    <div class="form-group">
                        <label class="form-label">ç°æœ‰æ…¢ç—…æ•°é‡</label>
                        <input type="number" id="pred-chronic" class="form-input" value="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">å»å¹´åŒ»ç–—æ€»æ”¯å‡º (HKD)</label>
                        <input type="number" id="pred-expense-last" class="form-input" value="2000">
                    </div>
                </div>
                <div>
                     <p class="section-separator">4. é‡‘èç‰¹å¾</p>
                     <div class="form-group">
                        <label class="form-label">å•†ä¸šä¿é™©é…ç½®</label>
                        <select id="pred-insurance" class="form-select">
                            <option value="none">æ— å•†ä¸šä¿é™©</option>
                            <option value="basic">ä»…åŸºç¡€ä½é™¢é™©</option>
                            <option value="high">é«˜ç«¯åŒ»ç–—é™©</option>
                        </select>
                    </div>
                </div>
            </div>
            <button class="btn btn-primary" style="width:100%; margin-top:20px;" onclick="window.logic.calculatePrediction()">ç”Ÿæˆé¢„æµ‹æŠ¥å‘Š</button>
        </div>
    </div>
    
    <!-- Upload Data Modal -->
    <div id="upload-data-modal" class="modal-overlay">
        <div class="modal" style="width:500px;">
            <div class="close-modal">&times;</div>
            <h3>ä¸Šä¼ åŒ»ç–—æ•°æ®</h3>
            <div style="border: 2px dashed #cbd5e1; border-radius: 12px; padding: 40px; text-align: center; margin: 20px 0; background: #f8fafc; cursor: pointer;">
                <div style="font-size: 40px; margin-bottom: 10px;">â˜ï¸</div>
                <p style="color: #64748b;">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶ æˆ– æ‹–æ‹½è‡³æ­¤</p>
                <p style="font-size: 12px; color: #94a3b8; margin-top: 5px;">æ”¯æŒ JPG, PNG, PDF (æœ€å¤§ 10MB)</p>
            </div>
            <div class="form-group">
                <label class="form-label">æ–‡æ¡£ç±»å‹</label>
                <select class="form-select">
                    <option>ä½“æ£€æŠ¥å‘Š</option>
                    <option>é—¨è¯Šç—…å†</option>
                    <option>åŒ»ç–—å‘ç¥¨</option>
                    <option>å…¶ä»–</option>
                </select>
            </div>
            <button class="btn btn-primary" style="width:100%;" onclick="window.toast('æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼æ­£åœ¨è§£æ...', 'success'); window.modals.close('upload-data-modal')">å¼€å§‹ä¸Šä¼ </button>
        </div>
    </div>

    <!-- NEW Guide Modal (Detailed) -->
    <div id="guide-modal" class="modal-overlay">
        <div class="modal" style="width: 800px;">
            <div class="close-modal">&times;</div>
            <h3 style="text-align:center; margin-bottom: 24px;">æ¸¯äººåŒ—ä¸Šå°±åŒ»é€šå…³è¯¦è§£</h3>
            
            <div class="tabs" id="guide-tabs" style="justify-content: center;">
                <div class="tab-btn active" data-tab="guide-pre"><span class="tab-num">01</span> <span class="tab-text">è¡Œå‰å‡†å¤‡</span></div>
                <div class="tab-btn" data-tab="guide-day"><span class="tab-num">02</span> <span class="tab-text">å°±è¯Šå½“æ—¥</span></div>
                <div class="tab-btn" data-tab="guide-post"><span class="tab-num">03</span> <span class="tab-text">åç»­ä¸ç†èµ”</span></div>
            </div>

            <!-- Tab 1 -->
            <div id="guide-pre" class="guide-content active">
                <div class="guide-block">
                    <h4>1. ç»‘å®šæ”¯ä»˜æ–¹å¼ <span class="tag red">é‡ç‚¹</span></h4>
                    <p>æ·±åœ³åŒ»é™¢ 90% é‡‡ç”¨çº¿ä¸Šè‡ªåŠ©ç¼´è´¹ï¼Œæœªç»‘å®šæ”¯ä»˜å¯èƒ½å¯¼è‡´æ— æ³•ç¼´è´¹æˆ–æ’é˜Ÿæ—¶é—´æé•¿ã€‚</p>
                    <div class="tips-box">
                        <strong>å»ºè®®æå‰åœ¨é¦™æ¸¯å®Œæˆï¼š</strong>
                        <ul>
                            <li><strong>å¾®ä¿¡æ”¯ä»˜ (WeChat Pay HK)ï¼š</strong> åœ¨é’±åŒ…ä¸­é€‰æ‹©â€œå†…åœ°â€åœ°åŒºï¼Œç»‘å®šé¦™æ¸¯ä¿¡ç”¨å¡æˆ–é“¶è¡Œè´¦æˆ·ã€‚</li>
                            <li><strong>æ”¯ä»˜å® (AlipayHK)ï¼š</strong> å¼€é€šâ€œè·¨å¢ƒæ”¯ä»˜â€åŠŸèƒ½ï¼Œæˆ–ä¸‹è½½å†…åœ°ç‰ˆæ”¯ä»˜å®ç»‘å®šé¦™æ¸¯ä¿¡ç”¨å¡ã€‚</li>
                            <li>ç¡®ä¿æ‰‹æœºå·²å¼€é€šæ¼«æ¸¸æ•°æ®ï¼Œèƒ½æ¥æ”¶é“¶è¡ŒéªŒè¯ç ã€‚</li>
                            <li>å®Œæˆåå¯è¿›å…¥ HFA App â†’ã€Œæ”¯ä»˜è®¾ç½®ã€è¿›è¡Œæˆæƒç»‘å®šï¼Œæ–¹ä¾¿ä¸€é”®æ”¯ä»˜æŒ‚å·è´¹ã€‚</li>
                        </ul>
                    </div>
                </div>
                <div class="guide-block">
                    <h4>2. èº«ä»½è¯ä»¶æ£€æŸ¥</h4>
                    <p>å¿…é¡»æºå¸¦<strong>å›ä¹¡è¯ (æ¸¯æ¾³å±…æ°‘æ¥å¾€å†…åœ°é€šè¡Œè¯)</strong> åŸä»¶ã€‚å»ºè®®æ‰‹æœºæ‹ç…§å¤‡ä»½ä»¥é˜²é—å¤±ã€‚éƒ¨åˆ†åŒ»é™¢æ”¯æŒå›ä¹¡è¯ç”µå­ç‰ˆï¼Œä½†å»ºè®®æºå¸¦å®ä½“è¯ä»¶ã€‚</p>
                </div>
                <div class="guide-block">
                    <h4>3. HFA é¢„çº¦æŒ‚å· (æ ¸å¿ƒæ­¥éª¤)</h4>
                    <p>é€šè¿‡ Care Hub å®Œæˆä¸€é”®é¢„çº¦ï¼Œå¹³å°ä¼šè‡ªåŠ¨æ¨èåˆé€‚ç§‘å®¤ã€åŒ»ç”Ÿçº§åˆ«ï¼ˆæ™®é€š/ä¸“å®¶ï¼‰åŠæ˜¾ç¤ºæ’æœŸã€‚</p>
                    <div class="tips-box">
                        <strong>é¢„çº¦ä¼˜åŠ¿ï¼š</strong>
                        <ul>
                            <li>æå‰æŸ¥çœ‹é¢„è®¡è´¹ç”¨åŒºé—´ï¼ˆçŸ­æœŸæ”¯å‡ºé¢„æµ‹ï¼‰ã€‚</li>
                            <li>çŸ¥æ™“å¯èƒ½éœ€è¦çš„æ£€æŸ¥é¡¹ï¼ˆå¦‚éœ€ç©ºè…¹ï¼Œç³»ç»Ÿä¼šæç¤ºï¼‰ã€‚</li>
                            <li>å»ºè®®æå‰ 3â€“7 å¤©åœ¨ HFA å®Œæˆé¢„çº¦ï¼Œçƒ­é—¨ä¸“å®¶å·éœ€æ›´æ—©ã€‚</li>
                        </ul>
                    </div>
                </div>
                <div class="guide-block">
                    <h4>4. å‡†å¤‡èµ„æ–™</h4>
                    <p>å¯åœ¨ HFA ä¸Šä¼ é¦™æ¸¯æ—¢å¾€ç—…å†ã€åŒ–éªŒæŠ¥å‘Šã€å½±åƒèµ„æ–™åŠæœç”¨ä¸­çš„è¯ç‰©åˆ—è¡¨ã€‚åŒ»ç”Ÿèƒ½æ›´ç²¾å‡†åˆ¤æ–­ï¼Œå‡å°‘ä¸å¿…è¦æ£€æŸ¥ã€‚</p>
                </div>
            </div>

            <!-- Tab 2 -->
            <div id="guide-day" class="guide-content">
                <div class="guide-block">
                    <h4>1. æŠ¥åˆ°æµç¨‹</h4>
                    <p>åˆ°é™¢å‰ 30 åˆ†é’Ÿ HFA ä¼šè‡ªåŠ¨å‘é€æé†’ã€‚åˆ°è¾¾åŒ»é™¢åï¼Œæ ¹æ® HFA é™¢å†…å¯¼èˆªå‰å¾€è‡ªåŠ©æŠ¥åˆ°æœºã€‚ä½¿ç”¨å›ä¹¡è¯æˆ–é¢„çº¦äºŒç»´ç è¿›è¡ŒæŠ¥åˆ°ã€‚</p>
                </div>
                <div class="guide-block">
                    <h4>2. ç¼´è´¹æ–¹å¼ (åˆ†æ®µå¼)</h4>
                    <p>å†…åœ°å°±åŒ»é€šå¸¸åˆ†é˜¶æ®µç¼´è´¹ï¼šæŒ‚å·è´¹ â†’ åŒ»ç”Ÿå¼€å• â†’ æ£€æŸ¥è´¹ â†’ æ£€æŸ¥å®Œå›è¯Š â†’ è¯è´¹ã€‚æ¯ä¸ªç¯èŠ‚éƒ½æ”¯æŒæ‰‹æœºæ”¯ä»˜ï¼ˆå¾®ä¿¡/æ”¯ä»˜å®ï¼‰ã€‚</p>
                </div>
                <div class="guide-block">
                    <h4>3. å°±è¯Šå…³é”®åŠ¨ä½œ <span class="tag red">ç†èµ”å¿…çœ‹</span></h4>
                    <p>ä¸ºäº†åç»­å›æ¸¯æŠ¥é”€ä¿é™©ï¼Œè¯·åŠ¡å¿…å‘åŒ»ç”Ÿæˆ–æŠ¤å£«æ˜ç¡®æå‡ºä»¥ä¸‹è¦æ±‚ï¼š</p>
                    <div class="tips-box">
                        <ul>
                            <li><strong>æ‰“å°ç—…å†ï¼š</strong> å¿…é¡»åŒ…å«åŒ»ç”Ÿç­¾åå’ŒåŒ»é™¢ç›–ç« ã€‚</li>
                            <li><strong>æ‰“å°å‘ç¥¨ï¼š</strong> éœ€è¦æ­£å¼çš„çº¸è´¨å‘ç¥¨ï¼ˆæ”¶æ®ï¼‰ï¼Œè€Œéä»…æœ‰åˆ·å¡å°ç¥¨ã€‚</li>
                            <li><strong>å‡ºå…·è¯æ˜ï¼š</strong> å¦‚æœ‰éœ€è¦ï¼Œè¯·åŒ»ç”Ÿå¼€å…·ç—…å‡æ¡æˆ–è½¬è¯Šå•ã€‚</li>
                        </ul>
                    </div>
                </div>
                <div class="guide-block">
                    <h4>4. æ£€æŸ¥æŒ‡å¼•</h4>
                    <p>HFA ä¼šæ ¹æ®åŒ»é™¢æµç¨‹æç¤ºæ‚¨æ£€æŸ¥ç§‘å®¤æ‰€åœ¨çš„æ¥¼å±‚ã€çª—å£å·ä»¥åŠå¹³å‡ç­‰å¾…æ—¶é—´ã€‚æ£€æŸ¥åæ˜¯å¦éœ€è¦å›è¯Šå®¤æ‰¾åŒ»ç”Ÿçœ‹æŠ¥å‘Šï¼Œç³»ç»Ÿä¹Ÿä¼šæç¤ºã€‚</p>
                </div>
            </div>

            <!-- Tab 3 -->
            <div id="guide-post" class="guide-content">
                <div class="guide-block">
                    <h4>1. å–è¯ / ä»£ç…</h4>
                    <p>ä¸­è¯å¯é€‰æ‹©å½“åœºå–è¯æˆ–é€‰æ‹©å¿«é€’å›æ¸¯ï¼ˆéƒ¨åˆ†æœºæ„æ”¯æŒï¼‰ã€‚HFA ä¼šæç¤ºè¯æˆ¿ä½ç½®ä¸æ’é˜Ÿæ—¶æ®µã€‚</p>
                </div>
                <div class="guide-block">
                    <h4>2. å¤è¯Šé¢„çº¦</h4>
                    <p>åŒ»ç”Ÿå»ºè®®å¤è¯Šæ—¶é—´åï¼ŒHFA ä¼šåœ¨å¯¹åº”æ—¥æœŸè‡ªåŠ¨å¼¹å‡ºã€Œæ˜¯å¦å¤è¯Šã€æé†’ï¼Œæ”¯æŒä¸€é”®å†æ¬¡é¢„çº¦ï¼Œæ— éœ€é‡å¤å¡«å†™èµ„æ–™ã€‚</p>
                </div>
                <div class="guide-block">
                    <h4>3. ç†èµ”ææ–™æ•´ç† (Protection Hub)</h4>
                    <p>å°†ç—…å†ã€å‘ç¥¨ã€æ£€æŸ¥æŠ¥å‘Šã€è¯å•æ‹ç…§ä¸Šä¼ è‡³ Protection Hubã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨å®Œæˆï¼š</p>
                    <div class="tips-box">
                        <ul>
                            <li>å¯æŠ¥é¡¹ç›®è¯†åˆ«ä¸é‡‘é¢é¢„æµ‹ã€‚</li>
                            <li>æ‹’èµ”é£é™©æç¤ºï¼ˆå¦‚æ£€æŸ¥ç¼ºææ–™ã€æŠ¥å‘Šæ ¼å¼ä¸ç¬¦ï¼‰ã€‚</li>
                            <li>è‡ªåŠ¨ç”Ÿæˆã€Œå®Œæ•´ç†èµ”åŒ…ã€ï¼Œå¯ç›´æ¥ä¸‹è½½æäº¤ç»™ä¿é™©ä»£ç†äººã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast-container" class="toast-container"></div>
    <script>
/**
 * I18n Logic
 */
const i18nData = {
    "zh-CN": {
        "nav.home": "Home",
        "nav.care": "Care Hub",
        "nav.protection": "Protection Hub",
        "nav.wellness": "Wellness Hub",
        "nav.family": "Family Hub",
        "nav.myhfa": "My HFA",
        "nav.login": "ç™»å½• / æ³¨å†Œ",
        "hero.title": "æ¸¯äººè·¨å¢ƒå°±åŒ»<br>å®‰å¿ƒæ— å¿§æ–°é€‰æ‹©",
        "hero.desc": "è¿æ¥é¦™æ¸¯ä¸æ·±åœ³ä¼˜è´¨åŒ»ç–—èµ„æºã€‚å…¨æµç¨‹å°±åŒ»æŒ‡å¯¼ã€è´¹ç”¨é€æ˜é¢„ä¼°ã€ç†èµ”ææ–™è¾…åŠ©åŠå®¶åº­å¥åº·ååŒï¼Œä¸€ç«™å¼è§£å†³æ‚¨çš„è·¨å¢ƒåŒ»ç–—çƒ¦æ¼ã€‚",
        "hero.btn1": "æˆ‘è¦å»æ·±åœ³çœ‹ç—… â”",
        "hero.btn2": "æŸ¥çœ‹èƒ½æŠ¥é”€å¤šå°‘",
        "card.guide.title": "å°±åŒ»æŒ‡å¼•",
        "card.guide.desc": "èº«ä½“ä¸é€‚ä¸çŸ¥å»å“ªå®¶åŒ»é™¢ï¼ŸæŸ¥è¯¢å°±è¯Šæµç¨‹ä¸ä¸‰ç”²æ¨èã€‚",
        "card.cost.title": "è´¹ç”¨é¢„ä¼°",
        "card.cost.desc": "çœ‹ç—…å‰ç®—ä¸€ç®—ï¼Œå¿ƒé‡Œæœ‰æ•°ã€‚æ”¯æŒå…¬ç«‹ä¸ç§ç«‹ä»·æ ¼å¯¹æ¯”ã€‚",
        "card.wellness.title": "å¥åº·å¢å€¼",
        "card.wellness.desc": "ä¸¥é€‰æ·±åœ³é«˜ç«¯ä½“æ£€ã€æ´—ç‰™åŠä¸­åŒ»æœåŠ¡ï¼Œæ€§ä»·æ¯”ä¹‹é€‰ã€‚",
        "card.family.title": "å®¶åº­ååŒ",
        "card.family.desc": "ä¸€ç«™å¼ç®¡ç†çˆ¶æ¯ä¸å­å¥³å¥åº·æ¡£æ¡ˆï¼Œè¿œç¨‹é¢„çº¦æ›´æ”¾å¿ƒã€‚",
        "care.title": "Care Hub å°±åŒ»å…³æ€€ä¸­å¿ƒ",
        "care.desc": "æ™ºèƒ½è§„åˆ’æ‚¨çš„æ·±åœ³å°±åŒ»è·¯å¾„ï¼Œé€æ˜åŒ–è´¹ç”¨ä¸æµç¨‹ã€‚",
        "protection.title": "Protection Hub ç†èµ”ä¿éšœä¸­å¿ƒ",
        "protection.warn.title": "âš ï¸ é‡è¦æç¤ºï¼š",
        "protection.warn.desc": "æœ¬å¹³å°ä»…æä¾›ä¿¡æ¯è¾…åŠ©ä¸èµ„æ–™æ•´ç†ï¼Œä¸ä»£è¡¨ä¿é™©å…¬å¸å®˜æ–¹æ‰¿è¯ºã€‚å…·ä½“èµ”ä»˜ä»¥æ‚¨çš„ä¿å•æ¡æ¬¾ä¸ºå‡†ã€‚",
        "wellness.title": "Wellness Hub å¥åº·å¢å€¼ä¸­å¿ƒ",
        "family.title": "Family Hub å®¶åº­å¥åº·ååŒ",
        "myhfa.title": "My HFA ä¸ªäººä¸­å¿ƒ"
    },
    "zh-HK": {
        "nav.home": "é¦–é ",
        "nav.care": "å°±é†«ä¸­å¿ƒ",
        "nav.protection": "ç†è³ ä¸­å¿ƒ",
        "nav.wellness": "å¥åº·å¢å€¼",
        "nav.family": "å®¶åº­å”åŒ",
        "nav.myhfa": "å€‹äººä¸­å¿ƒ",
        "nav.login": "ç™»å…¥ / è¨»å†Š",
        "hero.title": "æ¸¯äººè·¨å¢ƒå°±é†«<br>å®‰å¿ƒç„¡æ†‚æ–°é¸æ“‡",
        "hero.desc": "é€£æ¥é¦™æ¸¯èˆ‡æ·±åœ³å„ªè³ªé†«ç™‚è³‡æºã€‚å…¨æµç¨‹å°±é†«æŒ‡å°ã€è²»ç”¨é€æ˜é ä¼°ã€ç†è³ ææ–™è¼”åŠ©åŠå®¶åº­å¥åº·å”åŒï¼Œä¸€ç«™å¼è§£æ±ºæ‚¨çš„è·¨å¢ƒé†«ç™‚ç…©æƒ±ã€‚",
        "hero.btn1": "æˆ‘è¦å»æ·±åœ³çœ‹ç—… â”",
        "hero.btn2": "æŸ¥çœ‹èƒ½å ±éŠ·å¤šå°‘",
        "card.guide.title": "å°±é†«æŒ‡å¼•",
        "card.guide.desc": "èº«é«”ä¸é©ä¸çŸ¥å»å“ªå®¶é†«é™¢ï¼ŸæŸ¥è©¢å°±è¨ºæµç¨‹èˆ‡ä¸‰ç”²æ¨è–¦ã€‚",
        "card.cost.title": "è²»ç”¨é ä¼°",
        "card.cost.desc": "çœ‹ç—…å‰ç®—ä¸€ç®—ï¼Œå¿ƒè£¡æœ‰æ•¸ã€‚æ”¯æŒå…¬ç«‹èˆ‡ç§ç«‹åƒ¹æ ¼å°æ¯”ã€‚",
        "card.wellness.title": "å¥åº·å¢å€¼",
        "card.wellness.desc": "åš´é¸æ·±åœ³é«˜ç«¯é«”æª¢ã€æ´—ç‰™åŠä¸­é†«æœå‹™ï¼Œæ€§åƒ¹æ¯”ä¹‹é¸ã€‚",
        "card.family.title": "å®¶åº­å”åŒ",
        "card.family.desc": "ä¸€ç«™å¼ç®¡ç†çˆ¶æ¯èˆ‡å­å¥³å¥åº·æª”æ¡ˆï¼Œé ç¨‹é ç´„æ›´æ”¾å¿ƒã€‚",
        "care.title": "Care Hub å°±é†«é—œæ‡·ä¸­å¿ƒ",
        "care.desc": "æ™ºèƒ½è¦åŠƒæ‚¨çš„æ·±åœ³å°±é†«è·¯å¾‘ï¼Œé€æ˜åŒ–è²»ç”¨èˆ‡æµç¨‹ã€‚",
        "protection.title": "Protection Hub ç†è³ ä¿éšœä¸­å¿ƒ",
        "protection.warn.title": "âš ï¸ é‡è¦æç¤ºï¼š",
        "protection.warn.desc": "æœ¬å¹³å°åƒ…æä¾›ä¿¡æ¯è¼”åŠ©èˆ‡è³‡æ–™æ•´ç†ï¼Œä¸ä»£è¡¨ä¿éšªå…¬å¸å®˜æ–¹æ‰¿è«¾ã€‚å…·é«”è³ ä»˜ä»¥æ‚¨çš„ä¿å–®æ¢æ¬¾ç‚ºæº–ã€‚",
        "wellness.title": "Wellness Hub å¥åº·å¢å€¼ä¸­å¿ƒ",
        "family.title": "Family Hub å®¶åº­å¥åº·å”åŒ",
        "myhfa.title": "My HFA å€‹äººä¸­å¿ƒ"
    },
    "en-US": {
        "nav.home": "Home",
        "nav.care": "Care Hub",
        "nav.protection": "Protection Hub",
        "nav.wellness": "Wellness Hub",
        "nav.family": "Family Hub",
        "nav.myhfa": "My HFA",
        "nav.login": "Login / Sign Up",
        "hero.title": "Cross-border Healthcare<br>Peace of Mind",
        "hero.desc": "Connecting HK & SZ premium medical resources. Full guidance, cost estimation, claim support & family health management.",
        "hero.btn1": "Go to Shenzhen â”",
        "hero.btn2": "Check Reimbursement",
        "card.guide.title": "Medical Guide",
        "card.guide.desc": "Find the right hospital and understand the process.",
        "card.cost.title": "Cost Estimator",
        "card.cost.desc": "Estimate costs before you go. Compare public vs private.",
        "card.wellness.title": "Wellness Plus",
        "card.wellness.desc": "Premium checkups, dental care & TCM services.",
        "card.family.title": "Family Hub",
        "card.family.desc": "Manage health records for parents & children remotely.",
        "care.title": "Care Hub",
        "care.desc": "Smart planning for your medical journey in Shenzhen.",
        "protection.title": "Protection Hub",
        "protection.warn.title": "âš ï¸ Important:",
        "protection.warn.desc": "Information provided is for reference only. Please refer to your insurance policy for actual coverage.",
        "wellness.title": "Wellness Hub",
        "family.title": "Family Hub",
        "myhfa.title": "My HFA Profile"
    }
};

window.i18n = {
    setLang: (lang) => {
        // Update text
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.dataset.i18n;
            if(i18nData[lang] && i18nData[lang][key]) el.innerHTML = i18nData[lang][key];
        });
        
        // Update button label
        const label = lang === 'zh-CN' ? 'ç®€ä½“' : (lang === 'zh-HK' ? 'ç¹é«”' : 'EN');
        const btn = document.getElementById('langBtn');
        if(btn) btn.innerHTML = `ğŸŒ ${label}`;
        
        // Close dropdown
        const dd = document.getElementById('langDropdown');
        if(dd) dd.classList.remove('show');
        
        // Save preference (optional)
        // localStorage.setItem('hfa_lang', lang);
    },
    toggleDropdown: () => {
        const dd = document.getElementById('langDropdown');
        if(dd) dd.classList.toggle('show');
    }
};

// Bind Language Button
document.addEventListener("DOMContentLoaded", () => {
    const langBtn = document.getElementById('langBtn');
    if(langBtn) {
        langBtn.onclick = (e) => {
            e.stopPropagation();
            window.i18n.toggleDropdown();
        };
    }
    // Close dropdown when clicking outside
    document.addEventListener('click', () => {
        const dd = document.getElementById('langDropdown');
        if(dd) dd.classList.remove('show');
    });
});

/**
 * HFA Application Logic
 * Pure Native JavaScript implementation
 */

// --- Data & State ---
const state = {
    hospitals: [
        { 
            name: "é¦™æ¸¯å¤§å­¦æ·±åœ³åŒ»é™¢", 
            area: "futian", 
            type: "public", 
            tags: ["æ¸¯èµ„ç®¡ç†", "å¯åˆ·åŒ»ä¿"], 
            desc: "å…¨ç§‘é—¨è¯Šæ‰“åŒ…æ”¶è´¹200å…ƒï¼Œå›½é™…åŒ–æ ‡å‡†ã€‚æä¾›è‹±è¯­ç²¤è¯­æœåŠ¡ï¼Œé€‚åˆæ¸¯äººå°±åŒ»ä¹ æƒ¯ã€‚",
            address: "æ·±åœ³å¸‚ç¦ç”°åŒºæµ·å›­ä¸€è·¯1å·",
            transport: "åœ°é“9å·çº¿æ·±åœ³æ¹¾å…¬å›­ç«™D1å‡ºå£"
        },
        { 
            name: "æ·±åœ³å¸‚ä¸­åŒ»é™¢", 
            area: "futian", 
            type: "public", 
            tags: ["ä¸­åŒ»å¼ºé¡¹", "ä¸‰ç”²"], 
            desc: "é’ˆç¸æ¨æ‹¿ç§‘å®¤å…¨å›½çŸ¥åï¼Œæ‹¥æœ‰ä¼—å¤šå›½å®¶çº§åè€ä¸­åŒ»ã€‚",
            address: "æ·±åœ³å¸‚ç¦ç”°åŒºç¦åè·¯1å·",
            transport: "åœ°é“1å·çº¿åå¼ºè·¯ç«™Cå‡ºå£"
        },
        { 
            name: "ç½—æ¹–åŒºäººæ°‘åŒ»é™¢", 
            area: "luohu", 
            type: "public", 
            tags: ["è¿‘å£å²¸", "äº’è”ç½‘åŒ»é™¢"], 
            desc: "è·ç¦»ç½—æ¹–å£å²¸ä»…10åˆ†é’Ÿè½¦ç¨‹ï¼Œæ¶ˆåŒ–å†…ç§‘ä¸ç”Ÿæ®–åŒ»å­¦ç§‘å®åŠ›å¼ºåŠ²ã€‚",
            address: "æ·±åœ³å¸‚ç½—æ¹–åŒºå‹è°Šè·¯47å·",
            transport: "åœ°é“1å·çº¿å›½è´¸ç«™Aå‡ºå£"
        },
        { 
            name: "å“æ­£åŒ»ç–— (ç§ç«‹)", 
            area: "nanshan", 
            type: "private", 
            tags: ["é«˜ç«¯æœåŠ¡", "ç¯å¢ƒå¥½"], 
            desc: "æ— éœ€æ’é˜Ÿï¼Œæ³¨é‡éšç§ï¼Œé€‚åˆå•†ä¸šä¿é™©ç”¨æˆ·ã€‚åŒ»ç”Ÿå¤šå…·æœ‰å›½é™…èƒŒæ™¯ã€‚",
            address: "æ·±åœ³å¸‚å—å±±åŒºæ·±å—å¤§é“9668å·åæ¶¦ç½®åœ°å¤§å¦",
            transport: "åœ°é“1å·çº¿é«˜æ–°å›­ç«™"
        },
        { 
            name: "å’Œç¦å®¶åŒ»é™¢", 
            area: "futian", 
            type: "private", 
            tags: ["å›½é™…å“ç‰Œ", "å¤šè¯­è¨€"], 
            desc: "æä¾›å…¨è‹±æ–‡å°±è¯Šç¯å¢ƒï¼Œ24å°æ—¶æ€¥è¯ŠæœåŠ¡ï¼Œä¸å›½é™…ä¸»æµä¿é™©ç›´ä»˜ã€‚",
            address: "æ·±åœ³å¸‚ç¦ç”°åŒºç¦å¼ºè·¯4033å·",
            transport: "åœ°é“4å·çº¿æ²™å°¾ç«™"
        },
        {
            name: "å—æ–¹åŒ»ç§‘å¤§å­¦æ·±åœ³åŒ»é™¢",
            area: "baoan",
            type: "public",
            tags: ["ä¸‰ç”²", "å¤§å­¦é™„å±", "è®¾å¤‡å…ˆè¿›"],
            desc: "å¹¿ä¸œçœé«˜æ°´å¹³åŒ»é™¢å»ºè®¾å•ä½ï¼ŒåŒ»ç–—æŠ€æœ¯é¢†å…ˆï¼Œæ€¥å±é‡ç—‡æ•‘æ²»èƒ½åŠ›å¼ºã€‚",
            address: "æ·±åœ³å¸‚å®å®‰åŒºæ–°æ¹–è·¯1333å·",
            transport: "åœ°é“1å·çº¿æ–°å®‰ç«™Eå‡ºå£"
        },
        {
            name: "æ·±åœ³æ¸¯é¾™åŒ»é™¢",
            area: "longgang",
            type: "private",
            tags: ["å¦‡äº§ç‰¹è‰²", "æ¸¯å¼æœåŠ¡"],
            desc: "ä½äºé¾™å²—åŒºï¼Œæä¾›ä¼˜è´¨çš„å¦‡äº§ç§‘åŠå…¨ç§‘æœåŠ¡ï¼Œç¯å¢ƒæ¸©é¦¨ã€‚",
            address: "æ·±åœ³å¸‚é¾™å²—åŒºé¾™å²—å¤§é“3012å·",
            transport: "åœ°é“3å·çº¿å‰ç¥¥ç«™Bå‡ºå£"
        }
    ],
    wellnessPackages: [
        { id: 1, cat: "checkup", title: "æ¸¯äººå¹´åº¦åŸºç¡€ä½“æ£€", price: "HK$ 1,800", oldPrice: "3,500", desc: "å«CTã€å½©è¶…ã€è‚¿ç˜¤ç­›æŸ¥ç­‰50é¡¹ã€‚", location: "ç½—æ¹–åŒºäººæ°‘åŒ»é™¢ä½“æ£€ä¸­å¿ƒ" },
        { id: 2, cat: "checkup", title: "å¿ƒè„‘è¡€ç®¡ä¸“é¡¹ç­›æŸ¥", price: "HK$ 2,200", desc: "é’ˆå¯¹ä¸‰é«˜äººç¾¤ï¼Œæ·±åº¦æ’æŸ¥éšæ‚£ã€‚", location: "æ¸¯å¤§æ·±åœ³åŒ»é™¢" },
        { id: 3, cat: "dental", title: "æ·±æ¸¯å®¶åº­æ´ç‰™å¥—é¤", price: "HK$ 680", desc: "3äººå…±äº«ï¼Œè¶…å£°æ³¢æ´ç‰™+æŠ›å…‰ã€‚", location: "çˆ±åº·å¥å£è…” (ç½—æ¹–å£å²¸åº—)" },
        { id: 4, cat: "tcm", title: "åè€ä¸­åŒ»é—®è¯Š", price: "HK$ 300/æ¬¡", desc: "ä¸‰ç”²ååŒ»å·æºï¼Œå«é’ˆç¸ä¸€æ¬¡ã€‚", location: "æ·±åœ³å¸‚ä¸­åŒ»é™¢ (ç¦ç”°é™¢åŒº)" }
    ],
    members: [
        { name: "Chan Tai Man", role: "æœ¬äºº", status: "å¥åº·", statusColor: "blue", lastDate: "2024-01-15", bp: "118/75", bs: "5.2", healthNotes: "æ— æ—¢å¾€ç—…å²ï¼Œé’éœ‰ç´ è¿‡æ•ã€‚" },
        { name: "Wong Siu Ming", role: "é…å¶", status: "å¥åº·è‰¯å¥½", statusColor: "green", lastDate: "2023-11-12", bp: "120/80", bs: "5.4", healthNotes: "æ— æ˜æ˜¾è¿‡æ•å²ï¼Œæ¯å¹´å®šæœŸä½“æ£€ã€‚" },
        { name: "Chan Mei Ling", role: "æ¯äº²", status: "è¡€å‹éšè®¿", statusColor: "red", lastDate: "2023-12-05", bp: "145/95", bs: "6.1", healthNotes: "ç¡®è¯Šé«˜è¡€å‹äºŒçº§ï¼Œæ¯æ—¥æœç”¨ç¡è‹¯åœ°å¹³ã€‚éœ€æ³¨æ„å…³èŠ‚ç–¼ç—›ã€‚" }
    ]
};

const insuranceData = {
    "AIA": ["AIA å‹é‚¦åŠæ—©åº·å¤", "AIA å‹é‚¦å…¨ç¨‹å®ˆæŠ¤ (é«˜ç«¯)"],
    "Prudential": ["Prudential ä¿è¯šåŒ»ç–—åŠ å€ä¿", "Prudential é«˜ç«¯åŒ»ç–—è®¡åˆ’"],
    "Manulife": ["Manulife å®åˆ©å…¨æŠ¤èˆª", "Manulife æ´»è€€äººç”Ÿ"],
    "Others": ["ä¸€èˆ¬ä½é™¢ä¿é™©", "æ„å¤–é™©"]
};

// --- Utilities ---
const getEl = (id) => document.getElementById(id);
const createEl = (tag, className = "", content = "") => {
    const el = document.createElement(tag);
    if (className) el.className = className;
    if (content) el.innerHTML = content;
    return el;
};

// --- Toast System ---
window.toast = (message, type = "info") => {
    const container = getEl("toast-container");
    const toast = createEl("div", `toast ${type}`, message);
    container.appendChild(toast);
    setTimeout(() => {
        toast.style.opacity = "0";
        toast.style.transform = "translateX(100%)";
        setTimeout(() => toast.remove(), 300);
    }, 3000);
};

// --- Router / Navigation ---
window.router = {
    navigate: (targetId) => {
        // Nav Links Update
        document.querySelectorAll(".nav-item").forEach(item => {
            if (item.dataset.target === targetId) item.classList.add("active");
            else item.classList.remove("active");
        });

        // Section Update
        document.querySelectorAll(".page-section").forEach(sec => {
            sec.classList.remove("active");
            if (sec.id === targetId) sec.classList.add("active");
        });
        
        window.scrollTo(0, 0);
    }
};

// --- Modal System ---
window.modals = {
    open: (id) => {
        const modal = getEl(id);
        const overlay = document.getElementById(id); // The overlay is the ID
        if (overlay) {
            overlay.style.display = "flex";
            // Bind close logic
            overlay.onclick = (e) => {
                if (e.target === overlay) window.modals.close(id);
            };
            const closeBtn = overlay.querySelector(".close-modal");
            if(closeBtn) closeBtn.onclick = () => window.modals.close(id);
        }
        
        // Dynamic population for booking modal
        if (id === 'booking-modal') {
             const select = getEl('booking-patient-select');
             if (select) {
                 select.innerHTML = '';
                 // Add self
                 const meOpt = document.createElement('option');
                 meOpt.text = "Chan Tai Man (æœ¬äºº)";
                 select.add(meOpt);
                 // Add family
                 state.members.forEach(m => {
                     const opt = document.createElement('option');
                     opt.text = `${m.name} (${m.role})`;
                     select.add(opt);
                 });
             }
        }
    },
    close: (id) => {
        const overlay = getEl(id);
        if (overlay) overlay.style.display = "none";
    }
};

// --- Logic Modules ---
const logic = {
    init: () => {
        logic.setupNav();
        logic.renderHospitals();
        logic.renderWellness();
        logic.renderFamily();
        logic.setupCareHub();
        logic.setupProtectionHub();
        logic.setupGlobalListeners();
        logic.setupGuideModal();
    },

    setupNav: () => {
        document.querySelectorAll(".nav-item").forEach(item => {
            item.onclick = () => window.router.navigate(item.dataset.target);
        });
    },

    setupGlobalListeners: () => {
        const loginBtn = getEl("loginBtn");
        if(loginBtn) loginBtn.onclick = () => window.modals.open("login-modal");
        
        const guideBtn = getEl("btn-view-guide");
        if(guideBtn) guideBtn.onclick = () => window.modals.open("guide-modal");
    },
    
    // New Guide Modal Logic
    setupGuideModal: () => {
        const tabBtns = document.querySelectorAll("#guide-tabs .tab-btn");
        const contents = document.querySelectorAll(".guide-content");

        tabBtns.forEach(btn => {
            btn.addEventListener("click", (e) => {
                // Remove active from all tabs
                tabBtns.forEach(b => b.classList.remove("active"));
                // Hide all contents
                contents.forEach(c => c.classList.remove("active"));
                
                // Activate clicked tab
                const target = e.currentTarget;
                target.classList.add("active");
                
                // Show target content
                const tabId = target.dataset.tab;
                if(tabId) {
                    const content = getEl(tabId);
                    if(content) content.classList.add("active");
                }
            });
        });
    },

    // Care Hub
    setupCareHub: () => {
        // Cost Calculator Function
        const calcCost = () => {
            const typeSelect = getEl("cost-hospital-type");
            const type = typeSelect ? typeSelect.value : 'public';
            const checks = document.querySelectorAll(".cost-check:checked");
            
            let total = type === 'public' ? 100 : 500; // Base fee: Public 100, Private 500
            checks.forEach(c => total += parseInt(c.value));
            
            const display = getEl("cost-display");
            if(display) display.innerText = total.toLocaleString();
        };
        
        // Bind change events for manual adjustments
        const typeSelect = getEl("cost-hospital-type");
        if(typeSelect) typeSelect.onchange = calcCost;
        // Logic will bind events to dynamic checkboxes later

        // Generate Plan & Auto-fill Cost Estimate based on symptoms
        const planBtn = getEl("btn-care-plan");
        if(planBtn) {
            planBtn.onclick = () => {
                const symptomInput = getEl("care-symptom");
                const symptom = symptomInput.value.trim();
                
                if(!symptom) { 
                    window.toast("è¯·è¾“å…¥ç—‡çŠ¶æè¿°", "error"); 
                    return; 
                }
                
                // 1. Keyword matching & Items Generation
                let recommendedDept = "å…¨ç§‘";
                let items = []; // { name, price, desc }

                if (symptom.match(/èƒƒ|è…¹|è‚šå­|æ¶ˆåŒ–|å‘•|å/)) {
                    recommendedDept = "æ¶ˆåŒ–å†…ç§‘";
                    items = [
                        { name: "æ— ç—›èƒƒé•œ/è‚ é•œ", price: 1500, desc: "å«éº»é†‰è´¹åŠä¸€æ¬¡æ€§è€—æ" },
                        { name: "å¹½é—¨èºæ†èŒæ£€æµ‹(C13)", price: 150, desc: "å¹æ°”æ£€æµ‹ï¼Œé‡‘æ ‡å‡†" },
                        { name: "è…¹éƒ¨å½©è¶…", price: 200, desc: "è‚èƒ†èƒ°è„¾è‚¾ç­›æŸ¥" },
                        { name: "å¸¸è§„è¯è´¹", price: 400, desc: "æŠ¤èƒƒè¯åŠæŠ—ç”Ÿç´ " }
                    ];
                } else if (symptom.match(/å¤´|æ™•|è„‘|ç¥ç»|ç—›/)) {
                    recommendedDept = "ç¥ç»å†…ç§‘";
                    items = [
                        { name: "å¤´éƒ¨CTå¹³æ‰«", price: 300, desc: "å¿«é€Ÿæ’é™¤å‡ºè¡€" },
                        { name: "å¤´éƒ¨MRI (æ ¸ç£)", price: 800, desc: "ç²¾ç»†æ£€æŸ¥è„‘è¡€ç®¡" },
                        { name: "é¢ˆæ¤MRI", price: 800, desc: "æ’é™¤é¢ˆæ¤å‹è¿«" },
                        { name: "è¡€æµå˜æ£€æµ‹", price: 200, desc: "è¡€æ¶²ç²˜ç¨ åº¦åˆ†æ" }
                    ];
                } else if (symptom.match(/éª¨|è…°|è…¿|æ‰‹|è„š|è·Œ|ä¼¤|è„Š/)) {
                    recommendedDept = "éª¨ç§‘";
                    items = [
                        { name: "Xå…‰æ‹ç‰‡", price: 120, desc: "éª¨æŠ˜åˆç­›ï¼Œä¾¿å®œå¿«æ·" },
                        { name: "å…³èŠ‚MRI", price: 800, desc: "è½¯ç»„ç»‡ä¸éŸ§å¸¦æŸä¼¤" },
                        { name: "å¤–ç”¨è¯/æ”¯å…·", price: 400, desc: "å›ºå®šä¸æ­¢ç—›" }
                    ];
                } else if (symptom.match(/çƒ­|çƒ§|å’³|æ„Ÿå†’|æµæ„Ÿ/)) {
                    recommendedDept = "å‘¼å¸å†…ç§‘";
                    items = [
                         { name: "è¡€å¸¸è§„+CRP", price: 60, desc: "åŒºåˆ†ç—…æ¯’/ç»†èŒæ„ŸæŸ“" },
                         { name: "èƒ¸éƒ¨CT", price: 400, desc: "æ’é™¤è‚ºç‚" },
                         { name: "æµæ„ŸæŠ—åŸç­›æŸ¥", price: 150, desc: "ç”²æµ/ä¹™æµ/æ”¯åŸä½“" },
                         { name: "é›¾åŒ–/è¾“æ¶²", price: 300, desc: "å¯¹ç—‡æ²»ç–—" }
                    ];
                } else {
                     recommendedDept = "å…¨ç§‘é—¨è¯Š";
                     items = [
                         { name: "è¡€å¸¸è§„+ç”ŸåŒ–å…¨å¥—", price: 300, desc: "åŸºç¡€å¥åº·æŒ‡æ ‡" },
                         { name: "åŒ»ç”Ÿè¯Šé‡‘", price: 200, desc: "è¯¦ç»†é—®è¯Šè´¹" }
                     ];
                }
                
                // 2. Render Checkboxes
                const container = getEl("cost-checkboxes");
                if(container) {
                    container.innerHTML = "";
                    items.forEach(item => {
                        const div = document.createElement("div");
                        div.style.background = "#f8fafc";
                        div.style.padding = "8px 12px";
                        div.style.borderRadius = "8px";
                        div.style.border = "1px solid #e2e8f0";
                        div.style.width = "48%"; // approx 2 columns
                        div.style.flexGrow = "1";
                        
                        div.innerHTML = `
                            <label style="display:flex; align-items:center; cursor:pointer; width:100%;">
                                <input type="checkbox" class="cost-check" value="${item.price}" checked style="margin-right:8px;">
                                <div style="flex-grow:1;">
                                    <div style="font-weight:600; font-size:14px;">${item.name}</div>
                                    <div style="font-size:12px; color:#64748b;">${item.desc}</div>
                                </div>
                                <div style="font-weight:600; color:#0f172a;">Â¥${item.price}</div>
                            </label>
                        `;
                        container.appendChild(div);
                    });
                    // Re-bind change events
                    document.querySelectorAll(".cost-check").forEach(c => c.onchange = calcCost);
                }
                
                // 3. Trigger calculation immediately
                calcCost(); 

                // 4. Update UI results
                const resultBox = getEl("care-result");
                resultBox.innerHTML = '<div style="text-align:center; color:#999;">æ­£åœ¨åˆ†ææ™ºèƒ½å¯¼è¯Š...</div>';
                resultBox.classList.remove("hidden");
                
                setTimeout(() => {
                    resultBox.innerHTML = `
                        <h4 style="color:var(--primary); margin-bottom:10px;">æ¨èç§‘å®¤ï¼š${recommendedDept}</h4>
                        <p style="font-size:14px; color:#666;">æ ¹æ®æ‚¨çš„æè¿°ï¼Œå»ºè®®å‰å¾€ä¸‰ç”²åŒ»é™¢${recommendedDept}å°±è¯Šã€‚</p>
                        <div style="margin-top:10px; padding-top:10px; border-top:1px dashed #e2e8f0; font-size:13px; color:var(--secondary);">
                            âœ… å³ä¾§è´¹ç”¨é¢„ä¼°å·²æ ¹æ®ç—…æƒ…è‡ªåŠ¨å‹¾é€‰äº†å»ºè®®æ£€æŸ¥é¡¹ç›®ã€‚
                        </div>
                    `;
                    window.toast(`æ–¹æ¡ˆç”ŸæˆæˆåŠŸï¼Œå·²è‡ªåŠ¨é¢„ä¼°${recommendedDept}è´¹ç”¨`, "success");
                }, 500);
            };
        }

        // Hospital Filters
        const filterHospitals = () => {
            const areaEl = getEl("filter-area");
            const typeEl = getEl("filter-type");
            if(areaEl && typeEl) {
                logic.renderHospitals(areaEl.value, typeEl.value);
            }
        };
        const fArea = getEl("filter-area");
        const fType = getEl("filter-type");
        if(fArea) fArea.onchange = filterHospitals;
        if(fType) fType.onchange = filterHospitals;
    },

    renderHospitals: (area = "all", type = "all") => {
        const container = getEl("hospital-list");
        if(!container) return;
        container.innerHTML = "";
        
        const filtered = state.hospitals.filter(h => {
            return (area === "all" || h.area === area) && (type === "all" || h.type === type);
        });

        if(filtered.length === 0) {
            container.innerHTML = '<div style="padding:20px; text-align:center; color:#999;">æš‚æ— ç¬¦åˆæ¡ä»¶çš„åŒ»é™¢</div>';
            return;
        }

        filtered.forEach((h, index) => {
            const areaMap = { 'futian': 'ç¦ç”°åŒº', 'luohu': 'ç½—æ¹–åŒº', 'nanshan': 'å—å±±åŒº', 'baoan': 'å®å®‰åŒº', 'longgang': 'é¾™å²—åŒº' };
            const div = createEl("div", "card", `
                <div style="display:flex; justify-content:space-between; align-items:start;">
                    <div style="width: 100%;">
                        <h4 style="margin-bottom:6px;">${h.name} ${h.tags.map(t => `<span class="tag blue">${t}</span>`).join("")}</h4>
                        <p style="font-size:13px; color:#64748b; margin-bottom:4px; overflow-wrap: break-word;">${h.desc.substring(0, 45)}...</p>
                        <p style="font-size:12px; color:#94a3b8;">ğŸ“ ${areaMap[h.area] || h.area}</p>
                    </div>
                    <button class="btn btn-secondary action-btn" style="padding:6px 12px; font-size:12px; margin-left:10px; flex-shrink:0;">æŸ¥çœ‹</button>
                </div>
            `);
            div.style.marginBottom = "16px";
            div.style.padding = "16px";
            
            // Bind Click Event
            div.querySelector(".action-btn").onclick = () => logic.openHospitalModal(h);
            
            container.appendChild(div);
        });
    },

    openHospitalModal: (hospital) => {
        getEl("hospital-modal-title").innerText = hospital.name;
        getEl("hospital-modal-tags").innerHTML = hospital.tags.map(t => `<span class="tag blue">${t}</span>`).join(" ");
        getEl("hospital-modal-desc").innerText = hospital.desc;
        getEl("hospital-modal-addr").innerText = hospital.address;
        getEl("hospital-modal-transport").innerText = hospital.transport;
        
        const bookBtn = getEl("hospital-book-btn");
        bookBtn.innerText = `é¢„çº¦ ${hospital.name}`;
        bookBtn.onclick = () => {
            window.modals.close("hospital-modal");
            getEl("booking-item-name").innerText = `é¢„çº¦æŒ‚å·ï¼š${hospital.name}`;
            
            // Auto fill Department based on hospital tags or common logic
            const deptSelect = getEl("booking-dept");
            if(deptSelect) {
                if(hospital.tags.includes("ä¸­åŒ»å¼ºé¡¹")) deptSelect.value = "ä¸­åŒ»ç§‘";
                else if(hospital.tags.includes("å¦‡äº§ç‰¹è‰²")) deptSelect.value = "å¦‡äº§ç§‘";
                else deptSelect.value = "å…¨ç§‘";
            }

            window.modals.open("booking-modal");
        };

        window.modals.open("hospital-modal");
    },

    // Protection Hub
    setupProtectionHub: () => {
        const btnCheck = getEl("btn-check-claim");
        if(btnCheck) {
            btnCheck.onclick = () => {
                const amtInput = getEl("claim-amount");
                const amt = parseInt(amtInput.value) || 0;
                const res = getEl("claim-result");
                res.classList.remove("hidden");
                if(amt < 300) {
                    res.style.background = "#ffebee";
                    res.style.color = "#c62828";
                    res.innerHTML = "âŒ <strong>å¯èƒ½ä¸å¯æŠ¥é”€ï¼š</strong> é‡‘é¢ä½äºé€šå¸¸çš„èµ·ä»˜çº¿ã€‚";
                } else {
                    res.style.background = "#e8f5e9";
                    res.style.color = "#2e7d32";
                    res.innerHTML = "âœ… <strong>å¯èƒ½å¯æŠ¥é”€ï¼š</strong> è¯·ä¿ç•™å¥½å‘ç¥¨å’Œç—…å†ã€‚";
                }
            };
        }

        const updateInsurancePlans = () => {
            const companySelect = getEl("insurance-company-select");
            const planSelect = getEl("insurance-plan-select");
            if(!companySelect || !planSelect) return;

            const company = companySelect.value;
            planSelect.innerHTML = ""; // clear
            
            const plans = insuranceData[company] || insuranceData["Others"];
            plans.forEach((p) => {
                const opt = document.createElement("option");
                opt.value = p;
                opt.text = p;
                planSelect.appendChild(opt);
            });
            updateMatList();
        };

        const updateMatList = () => {
            const activeTab = document.querySelector("#protection .tab-btn.active");
            const type = activeTab ? activeTab.dataset.tab : 'mat-outpatient';
            const planSelect = getEl("insurance-plan-select");
            const plan = planSelect ? planSelect.value : "";
            
            const content = getEl("mat-content");
            if(!content) return;

            let listHTML = "";

            if (type === 'mat-outpatient') {
                listHTML += `<li><strong>é—¨è¯Šç—…å†</strong>ï¼šéœ€åŒ»ç”Ÿç­¾ååŠåŒ»é™¢ç›–ç«  <button class="btn btn-secondary" style="padding:2px 8px; font-size:12px; margin-left:10px;">ğŸ“· ä¸Šä¼ </button></li>`;
                listHTML += `<li><strong>å‘ç¥¨åŸä»¶</strong>ï¼šå«æ”¶è´¹é¡¹ç›®æ˜ç»† <button class="btn btn-secondary" style="padding:2px 8px; font-size:12px; margin-left:10px;">ğŸ“· ä¸Šä¼ </button></li>`;
                if (plan.includes("AIA") || plan.includes("Manulife")) {
                   listHTML += `<li><strong>è½¬è¯Šè¯æ˜</strong>ï¼šéƒ¨åˆ†è®¡åˆ’å¦‚æ— æŒ‡å®šè¯Šæ‰€éœ€æä¾› <button class="btn btn-secondary" style="padding:2px 8px; font-size:12px; margin-left:10px;">ğŸ“· ä¸Šä¼ </button></li>`;
                }
                if (plan.includes("é«˜ç«¯")) {
                   listHTML += `<li><strong>ç›´ä»˜æˆæƒä¹¦</strong>ï¼šå¦‚å·²ä½¿ç”¨ç›´ä»˜å¡ <button class="btn btn-secondary" style="padding:2px 8px; font-size:12px; margin-left:10px;">ğŸ“· ä¸Šä¼ </button></li>`;
                }
            } else {
                listHTML += `<li><strong>å‡ºé™¢å°ç»“</strong>ï¼šéœ€åŒ»é™¢ç›–ç«  <button class="btn btn-secondary" style="padding:2px 8px; font-size:12px; margin-left:10px;">ğŸ“· ä¸Šä¼ </button></li>`;
                listHTML += `<li><strong>ä½é™¢å‘ç¥¨</strong>ï¼šè´¢æ”¿ä¸“ç”¨ç«  <button class="btn btn-secondary" style="padding:2px 8px; font-size:12px; margin-left:10px;">ğŸ“· ä¸Šä¼ </button></li>`;
                listHTML += `<li><strong>è´¹ç”¨æ€»æ¸…å•</strong>ï¼šè¯¦ç»†è€—ææ˜ç»† <button class="btn btn-secondary" style="padding:2px 8px; font-size:12px; margin-left:10px;">ğŸ“· ä¸Šä¼ </button></li>`;
                if (plan.includes("é«˜ç«¯")) {
                    listHTML += `<li><strong>é¢„æˆæƒä¹¦ (Pre-auth)</strong>ï¼šä½é™¢å‰ç”³è¯·çš„æ‰¹å‡†å‡½ <button class="btn btn-secondary" style="padding:2px 8px; font-size:12px; margin-left:10px;">ğŸ“· ä¸Šä¼ </button></li>`;
                }
            }
            
            content.innerHTML = `<ul style="padding-left:20px; line-height:2; color:#555;">${listHTML}</ul>`;
        };
        
        // Listeners
        document.querySelectorAll("#protection .tab-btn").forEach(btn => {
            btn.onclick = (e) => {
                document.querySelectorAll("#protection .tab-btn").forEach(b => b.classList.remove("active"));
                e.target.classList.add("active");
                updateMatList();
            };
        });
        
        const compSel = getEl("insurance-company-select");
        if(compSel) compSel.onchange = updateInsurancePlans;
        
        const planSel = getEl("insurance-plan-select");
        if(planSel) planSel.onchange = updateMatList;
        
        updateInsurancePlans(); // Init plans
    },

    // Wellness Hub
    renderWellness: (cat = "checkup") => {
        const grid = getEl("wellness-grid");
        if(!grid) return;
        grid.innerHTML = "";
        
        state.wellnessPackages.filter(p => p.cat === cat).forEach(p => {
            const card = createEl("div", "card");
            card.innerHTML = `
                <div style="display:flex; justify-content:space-between;">
                    <span class="tag green" style="margin-bottom:8px;">æ¨è</span>
                </div>
                <h4>${p.title}</h4>
                <div style="margin:12px 0;">
                    <span style="font-size:20px; font-weight:700; color:var(--accent);">${p.price}</span>
                    ${p.oldPrice ? `<span style="text-decoration:line-through; color:#999; font-size:13px; margin-left:5px;">HK$ ${p.oldPrice}</span>` : ''}
                </div>
                <p style="font-size:13px; color:#666; margin-bottom:8px;">${p.desc}</p>
                <div style="font-size:12px; color:#666; background:#f0f0f0; padding:6px; border-radius:4px; margin-bottom:16px;">
                    ğŸ“ ${p.location}
                </div>
                <button class="btn btn-primary" style="width:100%;">é¢„çº¦</button>
            `;
            card.querySelector("button").onclick = () => {
                getEl("booking-item-name").innerText = `é¢„çº¦æœåŠ¡ï¼š${p.title}`;
                window.modals.open("booking-modal");
            };
            grid.appendChild(card);
        });

        // Tabs
        document.querySelectorAll("#wellness-tabs .tab-btn").forEach(btn => {
            btn.onclick = (e) => {
                document.querySelectorAll("#wellness-tabs .tab-btn").forEach(b => b.classList.remove("active"));
                e.target.classList.add("active");
                logic.renderWellness(e.target.dataset.cat);
            };
        });
    },

    // Family Hub
    renderFamily: () => {
        const grid = getEl("family-grid");
        if(!grid) return;
        grid.innerHTML = "";
        
        state.members.forEach(m => {
            const card = createEl("div", "card clickable");
            card.onclick = () => logic.openMemberDetail(m);
            card.innerHTML = `
                <div style="display:flex; align-items:center; margin-bottom:12px;">
                    <div style="width:40px; height:40px; background:#f1f5f9; border-radius:50%; display:flex; align-items:center; justify-content:center; margin-right:12px; font-size:20px;">ğŸ‘¤</div>
                    <div>
                        <h4 style="margin:0; font-size:16px;">${m.name}</h4>
                        <span class="tag blue">${m.role}</span>
                    </div>
                </div>
                <p style="font-size:13px; color:#64748b;">ä¸Šæ¬¡å°±è¯Š: ${m.lastDate}</p>
                <div style="margin-top:8px;"><span class="tag ${m.statusColor}">${m.status}</span></div>
            `;
            grid.appendChild(card);
        });

        // Add the 'Add Member' button card
        const addCard = createEl("div", "card clickable");
        addCard.style.border = "2px dashed #cbd5e1";
        addCard.style.background = "#f8fafc";
        addCard.style.display = "flex";
        addCard.style.flexDirection = "column";
        addCard.style.alignItems = "center";
        addCard.style.justifyContent = "center";
        addCard.style.minHeight = "200px";
        addCard.onclick = () => window.modals.open("add-member-modal");
        addCard.innerHTML = `
            <div style="width:60px; height:60px; background:white; border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow:var(--shadow-sm); margin-bottom:16px;">
                <span style="font-size: 30px; color: var(--primary);">+</span>
            </div>
            <div style="color: #64748b; font-weight:500;">æ·»åŠ å®¶åº­æˆå‘˜</div>
        `;
        grid.appendChild(addCard);
    },

    openMemberDetail: (member) => {
        getEl("member-detail-name").innerText = member.name;
        getEl("member-detail-role").innerText = member.role;
        getEl("member-last-record").innerText = `${member.lastDate} - è¿›è¡Œäº†ä¸€æ¬¡å¸¸è§„æ£€æŸ¥ï¼Œ${member.status}`;
        getEl("member-health-notes").innerText = member.healthNotes || "æš‚æ— è¯¦ç»†å¥åº·å¤‡æ³¨ã€‚";
        
        // Visualize BP
        getEl("member-bp-val").innerText = member.bp;
        const systolic = parseInt(member.bp.split('/')[0]) || 0;
        const bpPercent = Math.min((systolic / 180) * 100, 100);
        getEl("member-bp-bar").style.width = `${bpPercent}%`;
        getEl("member-bp-bar").style.background = systolic > 140 ? "#ef4444" : "#10b981";

        // Visualize BS
        getEl("member-bs-val").innerText = member.bs;
        const bsVal = parseFloat(member.bs) || 0;
        const bsPercent = Math.min((bsVal / 10) * 100, 100);
        getEl("member-bs-bar").style.width = `${bsPercent}%`;

        window.modals.open("member-detail-modal");
    },

    addMember: () => {
        const nameInput = getEl("new-member-name");
        const roleSelect = getEl("new-member-role");
        const notesInput = getEl("new-member-notes");

        if(nameInput && nameInput.value) {
            state.members.push({ 
                name: nameInput.value, 
                role: roleSelect.value, 
                status: "æœªå…³è”æ¡£æ¡ˆ", 
                statusColor: "green", 
                lastDate: "--",
                bp: "--",
                bs: "--",
                healthNotes: notesInput.value || "æ— "
            });
            logic.renderFamily();
            window.modals.close("add-member-modal");
            window.toast("æˆå‘˜æ·»åŠ æˆåŠŸ", "success");
            nameInput.value = "";
            notesInput.value = "";
        }
    },

    // Prediction Logic (New)
    calculatePrediction: () => {
        // 1. Demographics
        const age = parseInt(getEl("pred-age").value) || 30;
        const gender = getEl("pred-gender").value;
        const familyHistory = document.querySelectorAll("#prediction-modal input[type='checkbox']:checked").length;
        
        // 2. Behavior
        const exercise = parseInt(getEl("pred-exercise").value) || 0;
        const habits = getEl("pred-habit").value;
        
        // 3. Medical
        const chronicCount = parseInt(getEl("pred-chronic").value) || 0;
        const lastExpense = parseInt(getEl("pred-expense-last").value) || 0;
        
        // 4. Financial
        const insurance = getEl("pred-insurance").value;
        
        // Algorithm (Dummy)
        let baseScore = 5000; // Base expense
        
        // Age factor
        if (age > 45) baseScore += (age - 45) * 200;
        if (age > 65) baseScore += 5000;
        
        // Gender factor
        if (gender === 'f' && age > 45 && age < 55) baseScore += 1500; // Menopause related checks
        
        // Family History
        baseScore += familyHistory * 2000;
        
        // Behavior
        if (exercise >= 3) baseScore -= 1000;
        if (habits !== 'none') baseScore += 2000;
        if (habits === 'both') baseScore += 2000;
        
        // Medical
        baseScore += chronicCount * 3000;
        // Use historical data weight
        if (lastExpense > 0) {
            baseScore = (baseScore + lastExpense) / 2;
        }
        
        // Financial Mitigation (Insurance reduces out-of-pocket risk, but here we predict TOTAL expense)
        // Let's calculate "Risk Level" based on score relative to insurance
        let riskLevel = "ä½é£é™©";
        let riskColor = "green";
        
        if (baseScore > 15000) { riskLevel = "ä¸­ç­‰é£é™©"; riskColor = "#f59e0b"; }
        if (baseScore > 30000) { riskLevel = "é«˜é£é™©"; riskColor = "#ef4444"; }
        
        // Insurance Impact on Risk Perception
        if (insurance === 'basic' && baseScore > 20000) { riskLevel = "æé«˜é£é™© (ä¿éšœä¸è¶³)"; riskColor = "#b91c1c"; }
        if (insurance === 'high') { riskLevel = "é£é™©å¯æ§ (ä¿éšœå……è¶³)"; riskColor = "green"; }
        
        // Update UI
        getEl("predicted-expense").innerText = Math.round(baseScore).toLocaleString();
        const badge = getEl("risk-badge");
        badge.innerText = riskLevel;
        badge.style.background = riskColor === 'green' ? '#ecfdf5' : (riskColor === '#ef4444' ? '#fef2f2' : '#fffbeb');
        badge.style.color = riskColor;
        
        window.modals.close("prediction-modal");
        window.toast("é¢„æµ‹æ¨¡å‹è®¡ç®—å®Œæˆ", "success");
    }
};

window.logic = logic;
document.addEventListener("DOMContentLoaded", logic.init);
    </script>
</body>
</html>